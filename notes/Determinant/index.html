<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="UTF-8">
    <meta name="description" content="">
    <title>Determinant</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" type="image/png" href="../../icon.png" />

    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Source+Sans+Pro:wght@400;600;700&family=Fira+Code:wght@400;700&display=swap" rel="stylesheet">
    
    
    
    
    <style>
        :root{--light:#ffffff;--dark:#000000;--secondary:#6e87b6;--tertiary:#84a59d;--visited:#afbfc9;--primary:#f28482;--gray:#4e4e4e;--lightgray:#f0f0f0;--outlinegray:#dadada}[saved-theme=dark]{--light:#232326 !important;--dark:#e6e6e6 !important;--secondary:#90b0ec !important;--visited:#4a575e !important;--tertiary:#6b879a !important;--primary:#f58382 !important;--gray:#d4d4d4 !important;--lightgray:#292633 !important;--outlinegray:#575757 !important}
    </style>
    
    
    
    
    <style>
        @use './markdown-style' as *;:root{--lt-colours-light:var(--light) !important;--lt-colours-lightgray:var(--lightgray) !important;--lt-colours-dark:var(--secondary) !important;--lt-colours-secondary:var(--tertiary) !important;--lt-colours-gray:var(--outlinegray) !important}h1,h2{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;color:var(--dark);font-weight:revert;margin:revert;padding-top:10px}h3,h4,ol,ul,thead{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;color:var(--dark);font-weight:revert;margin:revert;padding-top:0}p,ul,text{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;color:var(--gray);font-weight:revert;margin:revert;padding:revert}#TableOfContents>ol{counter-reset:section;margin-left:0;padding-left:1.5em}#TableOfContents>ol>ul{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;font-weight:600}footer{margin-top:4em;text-align:center}table{width:100%}img{width:100%;border-radius:3px;margin:1em 0}p>img+em{display:block;transform:translateY(-1em)}sup{line-height:0}p,tbody,li{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;color:var(--gray);line-height:1.5em}h2,h3{opacity:.9}blockquote{margin-left:0;border-left:3px solid var(--secondary);padding-left:1em;transition:border-color .2s ease}blockquote:hover{border-color:var(--tertiary)}table{padding:1.5em}td,th{padding:.1em .5em}.footnotes p{margin:.5em 0}.pagination{list-style:none;padding-left:0;display:flex;margin-top:2em;gap:1.5em;justify-content:center}.pagination>li{text-align:center;display:inline-block}.pagination>li a{background-color:transparent!important}.pagination>li a[href$="#"]{opacity:.2}.section h3>a{font-weight:600;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;margin:0}.section p{margin-top:0}article>.meta{margin:-1.5em 0 1em;opacity:.7}article>.tags{list-style:none;padding-left:0}article>.tags .meta>h1{margin:0}article>.tags .meta>p{margin:0}article>.tags>li{display:inline-block}article>.tags>li>a{border-radius:8px;border:var(--outlinegray)1px solid;padding:.2em .5em}article>.tags>li>a::before{content:"#";margin-right:.3em;color:var(--outlinegray)}article a{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;font-weight:500}article a.internal-link{text-decoration:none;background-color:transparent;padding:0 .1em;margin:auto -.1em;border-radius:3px}.backlinks a{font-weight:500;font-size:.9rem}sup>a{text-decoration:none;padding:0 .1em 0 .2em}a{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;font-size:1em;font-weight:700;text-decoration:none;transition:all .2s ease;color:var(--secondary)}a:hover{color:var(--tertiary)!important}pre{font-family:fira code;padding:.75em;border-radius:3px;overflow-x:scroll}code{font-family:fira code;font-size:.85em;padding:.15em .3em;border-radius:5px;background:var(--lightgray)}html{scroll-behavior:smooth}body{margin:0;height:100vh;width:100vw;overflow-x:hidden;background-color:var(--light)}@keyframes fadeIn{0%{opacity:0}100%{opacity:1}}footer{margin-top:4em}footer>a{font-size:1em;color:var(--secondary);padding:0 .5em 3em}hr{width:0%;margin:4em auto;height:2px;border-radius:1px;border-width:0;color:var(--dark);background-color:var(--dark)}.singlePage{margin:4em 25vw}@media all and (max-width:720px){.singlePage{margin:25px 5vw}}.page-end{display:flex;flex-direction:row;gap:2em}@media all and (max-width:720px){.page-end{flex-direction:column}}.page-end>*{flex:1 0}.page-end>.backlinks-container>ul{list-style:none;padding-left:0}.page-end>.backlinks-container>ul>li{margin:.5em 0;padding:.25em 1em;border:var(--outlinegray)1px solid;border-radius:5px}.page-end #graph-container{border:var(--outlinegray)1px solid;border-radius:5px}.centered{margin-top:30vh}article>h1{font-size:2em}header{display:flex;flex-direction:row;align-items:center}header>h1{font-size:2em}@media all and (max-width:600px){header>nav{display:none}}header>.spacer{flex:auto}header>svg{cursor:pointer;width:18px;min-width:18px;margin:0 1em}header>svg:hover .search-path{stroke:var(--tertiary)}header>svg .search-path{stroke:var(--gray);stroke-width:2px;transition:stroke .5s ease}#search-container{position:fixed;z-index:9999;left:0;top:0;width:100vw;height:100%;overflow:scroll;display:none;backdrop-filter:blur(4px);-webkit-backdrop-filter:blur(4px)}#search-container>div{width:50%;margin-top:15vh;margin-left:auto;margin-right:auto}@media all and (max-width:1200px){#search-container>div{width:90%}}#search-container>div>*{width:100%;border-radius:4px;background:var(--light);box-shadow:0 14px 50px rgba(27,33,48,.12),0 10px 30px rgba(27,33,48,.16);margin-bottom:2em}#search-container>div>input{box-sizing:border-box;padding:.5em 1em;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;color:var(--dark);font-size:1.1em;border:1px solid var(--outlinegray)}#search-container>div>input:focus{outline:none}#search-container>div>#results-container>.result-card{padding:1em;cursor:pointer;transition:background .2s ease;border:1px solid var(--outlinegray);border-bottom:none;width:100%;font-family:inherit;font-size:100%;line-height:1.15;margin:0;overflow:visible;text-transform:none;text-align:left;background:var(--light);outline:none}#search-container>div>#results-container>.result-card:hover,#search-container>div>#results-container>.result-card:focus{background:rgba(180,180,180,.15)}#search-container>div>#results-container>.result-card:first-of-type{border-top-left-radius:5px;border-top-right-radius:5px}#search-container>div>#results-container>.result-card:last-of-type{border-bottom-left-radius:5px;border-bottom-right-radius:5px;border-bottom:1px solid var(--outlinegray)}#search-container>div>#results-container>.result-card>h3,#search-container>div>#results-container>.result-card>p{margin:0}#search-container>div>#results-container>.result-card .search-highlight{background-color:#afbfc966;padding:.05em .2em;border-radius:3px}.section-ul{list-style:none;padding-left:0}.section-ul>li{border:1px solid var(--outlinegray);border-radius:5px;padding:0 1em;margin-bottom:1em}.section-ul>li h3{opacity:1;font-weight:700;margin-bottom:0}.section-ul>li .meta{opacity:.6}.popover{z-index:999;position:absolute;width:15em;display:inline;background-color:var(--light);padding:1em;border:1px solid var(--outlinegray);border-radius:5px;transform:translate(-50%,40%);opacity:0;pointer-events:none;transition:opacity .2s ease,transform .2s ease;transition-delay:.3s;user-select:none}.popover.visible{opacity:1;transform:translate(-50%,20%)}.popover>h3{margin:.5em 0}.popover>p{margin:0;font-weight:400}
    </style>
    
    
    
    
    <style>
        .darkmode{float:right;padding:1em;min-width:30px;position:relative}@media all and (max-width:450px){.darkmode{padding:1em}}.darkmode>.toggle{display:none;box-sizing:border-box}.darkmode svg{opacity:0;position:absolute;width:20px;height:20px;top:calc(50% - 10px);margin:0 7px;fill:var(--gray);transition:opacity .1s ease}.toggle:checked~label>#dayIcon{opacity:0}.toggle:checked~label>#nightIcon{opacity:1}.toggle:not(:checked)~label>#dayIcon{opacity:1}.toggle:not(:checked)~label>#nightIcon{opacity:0}
    </style>
    
    
    
    
    <style>
        .chroma{color:#f8f8f2;background-color:#282a36;overflow:hidden}.chroma .lntd{vertical-align:top;padding:0;margin:0;border:0}.chroma .lntable{border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block}.chroma .hl{display:block;width:100%;background-color:#ffc}.chroma .lnt{margin-right:.4em;padding:0 .4em;color:#7f7f7f}.chroma .ln{margin-right:.4em;padding:0 .4em;color:#7f7f7f}.chroma .k{color:#ff79c6}.chroma .kc{color:#ff79c6}.chroma .kd{color:#8be9fd;font-style:italic}.chroma .kn{color:#ff79c6}.chroma .kp{color:#ff79c6}.chroma .kr{color:#ff79c6}.chroma .kt{color:#8be9fd}.chroma .na{color:#50fa7b}.chroma .nb{color:#8be9fd;font-style:italic}.chroma .nc{color:#50fa7b}.chroma .nf{color:#50fa7b}.chroma .nl{color:#8be9fd;font-style:italic}.chroma .nt{color:#ff79c6}.chroma .nv{color:#8be9fd;font-style:italic}.chroma .vc{color:#8be9fd;font-style:italic}.chroma .vg{color:#8be9fd;font-style:italic}.chroma .vi{color:#8be9fd;font-style:italic}.chroma .s{color:#f1fa8c}.chroma .sa{color:#f1fa8c}.chroma .sb{color:#f1fa8c}.chroma .sc{color:#f1fa8c}.chroma .dl{color:#f1fa8c}.chroma .sd{color:#f1fa8c}.chroma .s2{color:#f1fa8c}.chroma .se{color:#f1fa8c}.chroma .sh{color:#f1fa8c}.chroma .si{color:#f1fa8c}.chroma .sx{color:#f1fa8c}.chroma .sr{color:#f1fa8c}.chroma .s1{color:#f1fa8c}.chroma .ss{color:#f1fa8c}.chroma .m{color:#bd93f9}.chroma .mb{color:#bd93f9}.chroma .mf{color:#bd93f9}.chroma .mh{color:#bd93f9}.chroma .mi{color:#bd93f9}.chroma .il{color:#bd93f9}.chroma .mo{color:#bd93f9}.chroma .o{color:#ff79c6}.chroma .ow{color:#ff79c6}.chroma .c{color:#6272a4}.chroma .ch{color:#6272a4}.chroma .cm{color:#6272a4}.chroma .c1{color:#6272a4}.chroma .cs{color:#6272a4}.chroma .cp{color:#ff79c6}.chroma .cpf{color:#ff79c6}.chroma .gd{color:#8b080b}.chroma .ge{text-decoration:underline}.chroma .gh{font-weight:700}.chroma .gi{font-weight:700}.chroma .go{color:#44475a}.chroma .gu{font-weight:700}.chroma .gl{text-decoration:underline}.lntd:first-of-type>.chroma{padding-right:0}.chroma code{font-family:fira code!important;font-size:.85em;line-height:1em;background:0 0;padding:0}.chroma{border-radius:3px;margin:0}
    </style>
    
    <script>
      const userPref=window.matchMedia('(prefers-color-scheme: light)').matches?'light':'dark',currentTheme=localStorage.getItem('theme')??userPref;currentTheme&&document.documentElement.setAttribute('saved-theme',currentTheme);const switchTheme=a=>{a.target.checked?(document.documentElement.setAttribute('saved-theme','dark'),localStorage.setItem('theme','dark')):(document.documentElement.setAttribute('saved-theme','light'),localStorage.setItem('theme','light'))};window.addEventListener('DOMContentLoaded',()=>{const a=document.querySelector('#darkmode-toggle');a.addEventListener('change',switchTheme,!1),currentTheme==='dark'&&(a.checked=!0)})
    </script>
    <script>
    const content = {"/":{"content":"\u003e Wiki made by azurewings\n## Index\n\n### 📚 Academic\n- [Mathematics](index/Mathematics.md)\n- [Computer science](index/Computer%20science.md)\n- [Business administration](index/Business%20administration.md)\n- [Economics](index/Economics.md)\n### 📁 Archives\n- [Books](index/Books.md)\n- [Movies](index/Movies.md)","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"azure-wiki"},"/.trash/":{"content":"","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Untitled Page"},"/.trash/-2":{"content":"","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Untitled Page"},"/.trash/Artificial":{"content":"","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Untitled Page"},"/.trash/Computer":{"content":"","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Untitled Page"},"/.trash/Computer-engineering":{"content":"","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Computer engineering"},"/.trash/Day-Planners-2/Day-Planner-20220317":{"content":"## Day Planner\n- [ ] ","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Untitled Page"},"/.trash/Day-Planners-2/Day-Planner-20220318":{"content":"## Day Planner\n- [ ] ","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Untitled Page"},"/.trash/Day-Planners-2/Day-Planner-20220319":{"content":"## Day Planner\n- [ ] ","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Untitled Page"},"/.trash/Day-Planners-2/Day-Planner-20220320":{"content":"## Day Planner\n- [ ] ","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Untitled Page"},"/.trash/Day-Planners-2/Day-Planner-20220321":{"content":"## Day Planner\n- [ ] ","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Untitled Page"},"/.trash/Day-Planners/Day-Planner-20220315":{"content":"## Day Planner\n- [ ] ","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Untitled Page"},"/.trash/Kernel-level-thread":{"content":"","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Untitled Page"},"/.trash/Kernel-level-threads":{"content":"A **kernel thread** executes kernel code and modifies kernel data structures.\n\n- Multithreaded OS kernel with single-threaded processes\n![kernel-singlethreaded-process](/notes/images/kernel-singlethreaded-process.png)\n\n- Multithreaded OS kernel with multithreaded processes\n![kernel-multithreaded-process](/notes/images/kernel-multithreaded-process.png)\n\n## Implementation of the Kernel Thread","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Kernel-level threads"},"/index/Books":{"content":"","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Books"},"/index/Business-administration":{"content":"","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Business administration"},"/index/Computer-science":{"content":"**Computer science** is the study of computation, automation, and information.\n\n## Basic mathematics\n- [Mathematical logic](notes/Mathematical%20logic)\n- [Set theory](notes/Set%20theory)\n\n## Data structures and algorithms\n- Data structures\n- Algorithms\n\t- Algorithm analysis\n- Combinatorial optimization\n\n## Theoretical computer science\n- Formal languages\n- Automata theory\n- Theory of computation\n\n## Programming language theory and formal methods\n- [Programming language theory](notes/Programming%20language%20theory)\n- Type theory\n- Compilers\n\n## Computer systems\n- Digital systems\n- [Computer architecture](notes/Computer%20architecture.md)\n- [Operating systems](notes/Operating%20systems)\n- Computer network\n- Database\n\n## [Artificial intelligence](notes/Artificial%20intelligence)","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Computer science"},"/index/Economics":{"content":"","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Economics"},"/index/Mathematics":{"content":"**Mathematics** is a study of abstract concepts such as numbers, quantities, spaces, changes, structures, etc., based on strict logic.\n\n## Algebra\n- [Linear algebra](notes/Linear%20algebra.md)\n- Abstract algebra\n\n## Analysis\n- Real analysis\n- Vector analysis\n- Functional analysis\n- Fourier analysis\n\n## Topology / Geometry\n- [Topology](notes/Topology.md)\n- Differential geometry\n\n## Probability / Statistics\n- Probability theory\n- Statistics\n\n## Discrete\n- Mathematical logic\n- Set theory\n- Category theory\n- Graph theory","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Mathematics"},"/index/Movies":{"content":"","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Movies"},"/notes/Abstract-syntax":{"content":"**Abstract syntax** formally express multiple components and subcomponents the program consists of.\n\n## Abstract Syntax Tree (AST)\nAbstract syntax are often described in the form of trees.","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Abstract syntax"},"/notes/Alternating-multilinear-form":{"content":"","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Alternating multilinear form"},"/notes/Artificial-intelligence":{"content":"","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Artificial intelligence"},"/notes/Atomic-operation":{"content":"## Definition\nAn **atomic operation** is an _indivisible_ operation that _cannot be ineterleaved_ or split by other operations.\n\n## Examples\n- On most modern architectures, a `load` or `store` of a 32-bit word from or to memory is an atomic operation.\n- However, depending on the hardware implementation, a `load` or `store` of a 64-bit word may not be atomic.","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Atomic operation"},"/notes/Basis":{"content":"","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Basis"},"/notes/Bounded-buffer-problem":{"content":"---\n\n## Definition\n```\n+","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Bounded buffer problem"},"/notes/Cauchy-Schwartz-inequality":{"content":"### Theorem\nFor any vectors $\\mathbf{x},\\mathbf{y} \\in \\mathbb{R}^n$,\n$$\n|\\mathbf{x}^\\top\\mathbf{y}| \\leq \\|\\mathbf{x}\\|_2\\|\\mathbf{y}\\|_2.\n$$\n\n### Generalization\nSee [Hölder's inequality](notes/Hölder's%20inequality).","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Cauchy-Schwartz Inequality"},"/notes/Comparison-between-processes-and-threads":{"content":"---\n\n## Comparison\n|                        | [Processes](/notes/Process)                 | [Threads](/notes/Thread)                                                    |\n|","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Comparison between processes and threads"},"/notes/Computer-architecture":{"content":"**Computer architecture** is a set of rules and methods that describe the functionality, organisation, and implementation of computer systems.\n\n## Computer Abstractions\n- [Performance](notes/Performance)\n\n## Instructions\n- [MIPS Assembly language](notes/MIPS%20Assembly%20language.md)\n\t- Representation of MIPS instructions in the computer\n-","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Computer architecture"},"/notes/Concrete-syntax":{"content":"**Concrete syntax** determines whether a certain string is a program or not.\n\n## Intuition\nLet $C$ be the set of all characters. Then, the set of all strings $S$ can be defined as\n$$\nS = \\lbrace c_1c_2\\cdots c_n : c_i \\in C \\rbrace.\n$$\nConcrete syntax defines which strings are considered as programs. Let $P$ be the set of all possible programs. In other words,\n$$\nP = \\lbrace p: p \\;\\text{is a program} \\rbrace.\n$$\nIt is clear that $P \\subseteq S$. Concrete syntax determines which elements $s \\in S$ are in $P$. \n\nHowever, $P$ is (in most cases) an infinite set. Hence a sophisticated way to define concrete syntax is required.\n\n## Backus-Naur Form (BNF)\nBNF is one of the most popular method to define a concrete syntax. It consists of three concepts: **terminals**, **non-terminals**, and **expressions**.\n\n#### Terminals\nA terminal is a string. `\"00\"`, `\"abc\"` are examples of terminals. Simple!\n\n#### Non-terminals\nA non-terminal, also called a **metavariable**, denotes a set of strings. In BNF, it is denoted as a name between a pair of angle brackets. `\u003cdigit\u003e`,`\u003cexpression\u003e` are examples of non-terminals.\n\n#### Expressions\nAn expression is an enumeration of one or more terminals/nonterminals. The followings are all examples of expressions.\n- `\"abc\"`\n- `\"0\"` `\"1\"`\n- `\u003cdigit\u003e`\n- `\u003cdigit\u003e` `\u003cnumber\u003e`\n- `\"-\"` `\u003cnumber\u003e`\n\nNow, it is possible to construct a concrete syntax in BNF. In BNF, a definition of a set is denoted as:\n\n`[nonterminal] ::= [expression] | [expression] | ...`\n\nwhere the vertical bars separates distinct expressions.\n\nAn example of BNF can be given as:\n```\n\u003cdigit\u003e  ::= \"0\" | \"1\" | \"2\" | \"3\" | \"4\" | \"5\" | \"6\" | \"7\" | \"8\" | \"9\"\n\u003cnat\u003e    ::= \u003cdigit\u003e | \u003cdigit\u003e \u003cnat\u003e\n\u003cnumber\u003e ::= \u003cnat\u003e | \"-\" \u003cnat\u003e\n```","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Concrete syntax"},"/notes/Condition-variable":{"content":"## Definition\nA **condition variable** is a synchronisation object that lets a [thread](notes/Thread.md) efficiently wait for a change to shared state that is protected by a [lock](notes/Lock.md).\n\n## APIs\nA condition variable has three methods.\n\n- **`CV::wait (Lock *lock*)`**\n\t- This call [atomically](notes/Atomic%20operation.md) **releases the lock** and **suspends execution of the calling thread**, placing the calling thread on the condition variable's waiting list.\n\t- Later, when the calling thread is awakened, the lock is re-acquired before returning from the `wait` call.\n\n- **`CV::signal ()`**\n\t- This call takes **one** thread off the condition variable's wait list and marks it as eligible to run (i.e., it puts the thread on the scheduler's ready list).\n\t- If no threads are on the waiting list, `signal` has no effect.\n\n- **`CV::broadcast ()`**\n\t- This call takes **all** threads off the condition variable's waiting list and marks them as eligible to run.\n\t- If no threads are on the waiting list, `broadcast` has no effect.\n\n## Properties\n#### Memoryless\n- The conditional variable itself has _no internal state_ other than a **queue** of waiting threads.\n\t- Condition variables do not need their own state because they are always used inside shared objects that have their own state.\n- If no threads are currently on the condition variable's waiting list, a `signal` or `broadcast` has no effect.\n- The condition variable has no _memory_ of earlier calls to `signal` or `broadcast`.\n\n#### [Atomic](notes/Atomic%20operation.md)  Lock Release\n- A thread always calls `wait` while holding a lock. The call to `wait` atomically releases the lock and puts the thread on the condition variable's waiting list.\n\t- Atomicity ensures that there is no separation between checking the shared object's state, deciding to wait, adding the waiting thread to the condition variable's queue and releasing the lock, so that some other thread can access the shared object.\n\n#### Non-immediate Return\n- When a waiting thread is re-enabled, it is moved to the [[scheduler]]'s ready queue with no special priority, and the scheduler may run it at some later time.\n- Furthermore, when the thread finally does run, it must re-acquire the lock, which means that other threads may have acquired and released the lock in the meantime, between the `signal` / `broadcast` occurs and when the waiter re-acquires the lock.\n- Even if the desired predicate were true when `signal` / `broadcast` was called, it may no longer be true when `wait` returns.","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Condition variable"},"/notes/Coordinates":{"content":"","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Coordinates"},"/notes/Cramers-rule":{"content":"","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Cramer's rule"},"/notes/Critical-section":{"content":"## Definition\nA **critical section** is a sequence of code that _atomically_ accesses shared state.","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Critical section"},"/notes/Deadlock":{"content":"","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Deadlock"},"/notes/Determinant":{"content":"","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Determinant"},"/notes/Dimension":{"content":"","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Dimension"},"/notes/Dual-mode-operation":{"content":"## Definition\n**Dual-mode operation** of a kernel consists of two modes: **user mode** and **kernel mode**. \n\n- In **user mode**, the processor checks each instruction before executing it to verify that it is permitted to be performed by that process.\n- In **kernel mode**, the operating system executes it with protection checks turned off.\n\n## Hardware Requirements\nThe following three things must be supported by the hardware in order to accomplish dual-mode operation.\n\n1. **Privileged Instructions**: All potentially unsafe instructions are prohibited when executing in user mode.\n2. **Memory Protection**: All memory accesses outside of a process's valid memory region are prohibited when executing in user mode.\n3. **Timer Interrupts**: The kermnel must have a way to periodically regain control from the current process, regardless of what the process does.\n\n#### Privileged Instructions\nInstructions that are available in kernel mode, but not in user mode, are called **privileged instructions**. The followings are examples of privileged instructions.\n\n- Changing the set of memory locations an application can access\n- Disabling processor interrupts\n- Changing an application's prvilige level\n- Jumping into kernel code\n\nIf an application attempts to execute an instruction that is prvileged, **processor exception** is caused. This causes the processor to transfer control to an **exception handler** in the operating system kernel.\n\nHowever, in some cases, applications must execute a privileged instruction. In such cases, applications are allowed to use a special instruction called **system call**. Processes can indirectly change their privilege level by executing a system call to transfer control into the kernel at a fixed location defined by the operating system.\n\n#### Memory Protection\nTo make memory sharing safe, an application must be prevented from reading/writing other applications' memory. Most modern processors introduce **virtual memory** to accomplish this.\n\nWith virtual memory, every process's memory starts at the same location (e.g., zero). The hardware translates these virtual addresses into physical memory locations. At runtime, **memory-management unit (MMU)** relocates each `load`/`store` instructions; if the given virtual address is illegal, MMU raises a **segmentation fault**.\n\n#### Timer Interrupts\nIf the user program enters an infinite loop (process monopolising CPU), or if the user simply becomes impatient and wants the system to stop the application, then the operating system must be able to regain control from applications. Operating system also needs to regain control of the processor in normal operations for multi-tasking.\n\nA physical timer included in the computer system delivers a hardware signal (interrupt) to the processor with a predefined frequency set by the kernel. (Each timer interrupts only one processor.) When the timer interrupt occurs, the hardware transfers from the user process to the kernel (interrupt handler) running in kernel mode.\n\n However, interrupts can be temporarily deferred by the kernel. This is crucial for the implementation of [mutual exclusion].","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Dual-mode operation"},"/notes/Field":{"content":"## Definition\nA field $F$ is a set on which two operations $+$ (_addition_) and $\\cdot$ (_multiplication_) are defined so that the followings hold.\n\nFor any $x, y, z \\in F$,\n\u003e **(A1)** $x + y = y + x$  　(Commutativity of addition)\n\u003e \n\u003e **(A2)** $(x + y) + z = x + (y + z)$ 　(Associativity of addition)\n\u003e\n\u003e **(A3)** $\\exists ! 0 \\in F$ such that  $\\forall x \\in F: x + 0 = x$ 　(Existence of additive identity)\n\u003e \n\u003e **(A4)** $\\forall x \\in F: \\exists ! (-x) \\in F$ such that $x + (-x) = 0$ 　(Existence of additive inverse)\n\u003e \n\u003e **(M1)** $xy = yx$ 　(Commutativity of multiplication)\n\u003e \n\u003e **(M2)** $(xy)z = x(yz)$ 　(Associativity of multiplication)\n\u003e\n\u003e **(M3)** $\\exists ! 1 \\in F$ such that $\\forall x \\in F: 1x = x$ 　(Existence of multiplicative identity)\n\u003e \n\u003e **(M4)**  $\\forall x \\in F \\setminus \\{0\\}: \\exists ! x^{-1} \\in F$ such that $xx^{-1} = 1$ 　(Existence of multiplicative inverse)\n\u003e \n\u003e **(D)** $x(y + z) = xy + xz$ 　(Distributivity of multiplication over addition)\n\n\n## Examples\n- The set of rational numbers $(\\mathbb{Q})$, real numbers $(\\mathbb{R})$, and complex numbers $(\\mathbb{C})$ are fields.\n- The set $B = \\{0, 1\\}$ with boolean addition / multiplication is a field.","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Field"},"/notes/Fundamental-theorem-of-linear-algebra":{"content":"","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Fundamental theorem of linear algebra"},"/notes/Hölders-inequality":{"content":"### Theorem\nFor any vectors $\\mathbf{x},\\mathbf{y} \\in \\mathbb{R}^n$ and for any $p,q \\geq 1$ such that $\\frac{1}{p} + \\frac{1}{q} = 1$, it holds that\n$$\n|\\mathbf{x}^\\top\\mathbf{y}| \\leq \\sum\\limits_{i=1}^n|x_iy_i| \\leq \\|\\mathbf{x}\\|_p\\|\\mathbf{y}\\|_q.\n$$","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Hölder's Inequality"},"/notes/Implementation-of-mode-transfer":{"content":"## Importance\nThe context switch ([mode transfer](notes/Mode%20transfer.md)) must be carefully crafted, and it relies on _hardware support_. To avoid confusion and reduce the possibility of error, m most operating systems have a common sequence of instructions both for entering the kernel and for returning to user level, regardeless of te cause.\n\nAt a minimum, this common sequence must provide the followings.\n\n- **Limited entry into the kernel**: User programs cannot be allowed to jump to arbitrary locations in the kernel.\n- **Atomic changes to processor state**: Transitioning between kernel and user mode is [atomic](/notes/Atomic%20operation); _the mode, program counter, stack and memory protection_ are all changed _\u003cu\u003eat the same time\u003c/u\u003e (with a single instruction).\n-  **Transparent, restatable execution**: The operating system must be able to restore the state of the user program exactly as it was before the context switch.\n\n## Interrupt Vector\nWhen an interrupt, processor exception or system call trap occurs, the operating system must take different actions depending on what the event is. To this end, the processor has a special register that points to an area of kernel memory called the **interrupt vector table** set up by the kernel.\n\nThe interrupt vector table is an array of pointers, with each entry pointing to the first instruction of a different handler procedure in the kernel. An **interrupt handler** is the term used for the procedure called by kernel on an interrupt.\n\n![interrupt-vector-table](/notes/images/interrupt-vector-table.png)\n\n## Interrupt Stack\n**Interrupt stack** is a region of _kernel_ memory pointed by a special, privileged register. When an interrupt, processor exception, or system call trap causes a context switch into the kernel, the hardware changes the stack pointer to point to the base of the kernel's interrupt stack. The _hardware_ automatically saves some of the interrupted process's registers by pushing them onto the interrupt stack before calling the kernel's handler.\n\nWhen the kernel handler handler runs, it pushes any remaining registers onto the stack before pereforming its work. When returning from the interrupt, processor exception or system call trap, the reverse occurs. The handler pops the saved registers and the hardware restores the registers it saved, returning back to the point where the processor was interrupted. When returning from a system call, the value of the saved program counter _must be incremented_.\n\nOn a multiprocessor, each processor needs to have its own interrupt stack so that the kernel can handle simultaneous system calls and exceptions aacross multiple processors.\n\n#### Two Stacks per Process\nMost operating system kernels go one step further and allocate a kernel interrupt stack for every user-level process. This makes it easier to switch to a new process inside an interrupt or system call handler.\n\n![interrupt-stack](/notes/images/interrupt-stack.png)\n\n- If the process is running on the processor in user mode, its kernel stack is empty.\n- If the process is running on the processor in kernel mode (regardless of cause), its kernel stack is in use, containing the saved registers from the suspended user-level computations and the current state of the kernel handler.\n- If the process is available to run but is waiting on the processorm its kernel stack contains the registers and state to be restored when the process is resumed.\n- If the process is waiting for an I/O event to complete, its kernel stack contains the suspended computation to be resumed when the I/O finishes.\n\n## Interrupt Masking\nIn certain regions of the kernel such as interrupt handlers or a scheduler, taking an interrupt could cause confusion. In such cases, the hardware provides a _privileged instruction_ to temporarily defer the delivery of an interrupt until it is safe to do so.\n\nIf multiple interrupts arrive while interrupts are disabled, the hardware delivers them in turn when interrupts are re-enabled. However, due to the limited buffering of hardwares, some interrupts may be lost.\n\nIf the processor takes an interrupt in kernel mode with interrupts enabled, it is safe to use the current stack pointer rather than resetting it to the base of the interrupt stack.","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Implementation of mode transfer"},"/notes/Inner-product":{"content":"## Definition\nAn inner product on a [vector space](notes/Vector%20space.md) $V$ over a [field](notes/Field.md) is a function $\\langle \\cdot,\\cdot\\rangle:V^2 \\to F$ that satisfies the followings:\n\nFor arbitrary $\\mathbf{x}, \\mathbf{y}, \\mathbf{z} \\in V$ and $c \\in \\mathbb{R}$,\n\u003e **(1)** $\\langle a\\mathbf{x}+\\mathbf{y},\\mathbf{z}\\rangle = a\\langle \\mathbf{x},\\mathbf{z}\\rangle + \\langle \\mathbf{y},\\mathbf{z}\\rangle$ 　(Linearity for the first argument)\n\u003e\n\u003e **(2)** $\\langle \\mathbf{x},\\mathbf{y}\\rangle = \\overline{\\langle \\mathbf{y},\\mathbf{x}\\rangle}$ 　(Conjugate symmetry)\n\u003e\n\u003e **(3)**  $\\langle \\mathbf{x},\\mathbf{x}\\rangle \\geq 0;$ $\\langle\\mathbf{x},\\mathbf{x}\\rangle = 0$ if and only if $\\mathbf{x}=\\mathbf{0}$ 　(Positive semidefiniteness)\n\n## Examples\n### Standard inner product\n#### Definition\nA standard inner space in $\\mathbb{R}^n$ is defined for $\\mathbf{x} = (x_1, \\cdots, x_n)$ and $\\mathbf{y} = (y_1, \\cdots, y_n)$ as\n$$\n\\langle\\mathbf{x},\\mathbf{y}\\rangle = \\mathbf{x}^\\top\\mathbf{y} = \\sum\\limits_{i=1}^n x_iy_i.\n$$\nNote that for the Euclidean [norm](notes/Norm.md),\n$$\n\\|\\mathbf{x}\\|_2 = \\sqrt{\\langle\\mathbf{x},\\mathbf{x}\\rangle}.\n$$\n\n### Angle between vectors\nThe standard inner product on $\\mathbb{R}^n$ is related to the angle between two vectors $\\mathbf{x}, \\mathbf{y}$. Let $\\theta$ be the angle between the two vectors and let $\\mathbf{z}=\\mathbf{x}-\\mathbf{y}$.\nThen, applying the second law of cosine gives\n$$\n\\|\\mathbf{z}\\|_2^2 = \\|\\mathbf{x}\\|_2^2 + \\|\\mathbf{y}\\|_2^2 -2\\|\\mathbf{x}\\|_2\\|\\mathbf{y}\\|_2\\cos\\theta.\n$$\nNow substitute $\\mathbf{z}=\\mathbf{x}-\\mathbf{y}$.\n\n$$\\begin{align*}\n\\|\\mathbf{x}-\\mathbf{y}\\|_2^2 \u0026= (\\mathbf{x}-\\mathbf{y})^\\top(\\mathbf{x}-\\mathbf{y}) \\\\\\\\[1pt]\n\u0026= \\mathbf{x}^\\top \\mathbf{x} + \\mathbf{y}^\\top\\mathbf{y} -2\\mathbf{x}^\\top\\mathbf{y} \\\\\\\\[2pt]\n\u0026= \\|\\mathbf{x}\\|_2^2 + \\|\\mathbf{y}\\|_2^2 -2\\mathbf{x}^\\top\\mathbf{y} \\\\\\\\[2pt]\n\u0026= \\|\\mathbf{x}\\|_2^2 + \\|\\mathbf{y}\\|_2^2 -2\\|\\mathbf{x}\\|_2\\|\\mathbf{y}\\|_2\\cos\\theta\n\\end{align*}$$\n\nHence,\n$$\n\\cos\\theta = \\dfrac{\\mathbf{x}^\\top\\mathbf{y}}{\\|\\mathbf{x}\\|_2\\|\\mathbf{y}\\|_2}.\n$$","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Inner product"},"/notes/Isomorphism":{"content":"","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Isomorphism"},"/notes/Linear-algebra":{"content":"Linear algebra is the branch of mathematics concerning linear equations, linear transformations (maps), and their representations in vector spaces and through matrices.\n\n## Vector Space\n- [Field](notes/Field.md)\n- [Vector space](notes/Vector%20space.md)\n\t- [Subspace](notes/Subspace.md)\n- [Basis](notes/Basis.md)\n\t- [Dimension](notes/Dimension)\n- [Coordinates](notes/Coordinates)\n\n## Linear Transformation\n- [Linear transformation](notes/Linear%20transformation)\n- [Isomorphism](notes/Isomorphism)\n- [Fundamental theorem of linear algebra](notes/Fundamental%20theorem%20of%20linear%20algebra)\n\n## Determinant\n- [Multilinear form](notes/Multilinear%20form)\n\t- [Alternating multilinear form](notes/Alternating%20multilinear%20form)\n- [Determinant](notes/Determinant)\n\t- [Properties of determinant](notes/Properties%20of%20determinant.md)\n- [Cramer's rule](notes/Cramer's%20rule.md)\n\n## Characteristic Polynomial\n\n## Decomposition Theorems\n\n## Inner Product Space\n- [Inner product](notes/Inner%20product.md)","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Linear algebra"},"/notes/Linear-transformation":{"content":"","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Linear transformation"},"/notes/Lock":{"content":"## Definition\nA **lock** is a synchronisation variable that provides **mutual exclusion** - when one thread holds a lock, no other thread can hold it.\n\n## APIs\nA lock enables mutual exclusion by providing two methods: `Lock::acquire()` and `Lock::release()`. These methods are defined as follows:\n\n- A lock can be in one of two states: `busy` or `free`.\n- A lock is initially in the `free` state.\n- **`Lock::acquire()`**\n\t- The caller thread **waits** until the lock is `free` and then atomically makes the lock `busy`.\n\t- Checking the state of a lock and setting the state to `busy` are, together, an [atomic operation](notes/Atomic%20operation.md).\n\t- Even if multiple threads try to acquire the lock, at most one thread will succeed.\n- **`Lock::release()`** \n\t- This call makes the lock `free`.\n\t- If there are pending `acquire()` operations, this state change causes one of them to proceed.\n\n## Properties\nA lock should ensure the three properties: **mutual exclusion**, **progress**, and **bounded waiting**. Mutual exclusion ensures [safety](notes/Too%20much%20milk%20problem#Safety), while progress and bounded waiting ensures [liveliness](notes/Too%20much%20milk%20problem#Liveliness).\n\n#### Mutual Exclusion\nAt most **one** thread can hold the lock.\n\n#### Progress\nIf no thread holds the lock and any thread attempts to acquire the lock, then eventually some thread succeeds in acquiring the lock.\n\n#### Bounded Waiting\nIf a thread $T$ attempts to acquire a lock, then there exists a bound on the number of times other threads can successfully acquire the lock before $T$ does.\n\n## Rules for Using Locks\n- **Lock is initially free**.\n- **Always acquire lock before accessing shared data.\n- **Always release after finishing with shared data**.\n- **Never access shared data without acquiring lock**.","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Lock"},"/notes/MIPS-Assembly-language":{"content":"---\n\n## Operands and operations\n#### MIPS Operands\n- **Registers**(2^5 = 32):  `$s0-$s7, $t0-$t9, $zero, $a0-$a3, $v0-$v1, $gp, $fp, $sp, $ra, $at`\n- **Memory words** (2^30): `Memory[X]`\n\n#### MIPS assembly language\n| **Category**  | **Instruction**       | **Example**         | **Meaning**              |\n|","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"MIPS Assembly language"},"/notes/Mathematical-logic":{"content":"","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Mathematical logic"},"/notes/Mode-transfer":{"content":"The operating system must provide a way to safely transfer between user mode and kernel mode. \n\n## User to Kernel Mode\nThere are three reasons for the kernel to take control from a user process: **interrupts**, **processor exceptions**, and **system calls**.\n\n#### Interrupts\nAn **interrupt** is an asynchronous signal to the processor that some external event has occurred that may require its attention. The followings are examples of interrupts.\n\n- Processor timer\n- I/O requests (keyboard, mouse, network, ...)\n\nA processor checks for whether an interrupt has arrived as it executes and, if so, it completes or stalls any instructions that are in progress. On a multiprocessor, an interrupt is taken on only one of the processors. Each different type of interrupt requires its own **interrupt handler**.\n\n#### Processor Exceptions\nA **processor exception** is a hadware event caused by (unexpected or malicious) user program behaviour that causes a transfer of control to the kernel. The followings are examples of processor exceptions.\n\n- Performing privileged instruction\n- Accessing memory outside accessible memory region (Segmentation fault)\n- Dividing by zero\n- Writing to read-only memory\n- Accessing a word of memory with a non-aligned address\n- Setting a breakpoint in a program\n\nOn a multiprocessor, the exception only stops execution on the processor triggering the exception. The kernel then needs to send interprocessor interrupts to stop execution of the parallel program on other processors.\n\n#### System Calls\nUser programs can voluntarily transition into the operating system kernel that the kernel perform an operation on the user's behalf. A **system call** is any procedure provided by the kernel that can be called from user level. The followings are examples of system calls.\n\n- System call to send/receive packets over the network\n- System call to create/delete files\n- System call to read/write data into files\n- System call to create new user process\n\nTo protect the kernel from misbehaving user programs, it is essential that the hardware transfers control on a ststem call to a _pre-defined_ address. Even with system calls, user processes cannot be allowed to jump to arbitrary places in the kernel.\n\n## Kernel to User Mode\n#### New Process\nTo start a new process, the kernel copies the program into memorym, sets the program counter to the first instruction of the process, sets the stack pointer to the base of the user stack, and switches to user mode.\n\n#### Resume After an Interrupt, Processor Exception, or System Call\nWhen the kernel finishes handling th erequest, it resumes the execution of the interrupted process by restoring its program counter, restoring its registers, and changing the mode back to user level.\n\n#### Switch to Different Process\nThe kernel save the process state of the old process in the process's control block. The kernel can then resume a different process by loading its state from the process's control block into the processor and then switching to user mode.\n\n#### User-level Upcall\nMany operating systems provide user programs with the ability to receive any asynchronous notification or events.","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Mode transfer"},"/notes/Multilinear-form":{"content":"","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Multilinear form"},"/notes/Norm":{"content":"## Intuition\nWIP\n\n## Definition\nA function $\\|\\cdot\\|: V\\to \\mathbb{R}$ is a norm if it satisfies the followings:\n\nFor arbitrary $\\mathbf{x},\\mathbf{y}\\in V$ and $c \\in \\mathbb{R}$,\n\n\u003e **(1)**    $\\|\\mathbf{x}+\\mathbf{y}\\| \\leq \\|\\mathbf{x}\\| + \\|\\mathbf{y}\\|$ 　(Subadditivity)\n\u003e\n\u003e **(2)**    $c\\|\\mathbf{x}\\| = |c|\\|\\mathbf{x}\\|$ 　(Absolute homogeneity)\n\u003e\n\u003e **(3)**    $\\|\\mathbf{x}\\|\\geq 0;$ $\\|\\mathbf{x}\\| = 0$ if and only if $\\mathbf{x}=\\mathbf{0}$ 　(Positive semidefiniteness)\n\n## $L^p$-Norms\n### Definition\nFor $\\mathbf{x} = (x_1, \\cdots, x_n) \\in \\mathbb{R}^n$, an $L^p$-norm when $1\\leq p \u003c \\infty$ is defined as:\n\n$$\\lVert\\mathbf{x}\\rVert_p := \\left( \\sum\\limits_{i=1}^n |x_i|^p\\right)^{1/p}$$\n\nFor $p = \\infty$, the $L^\\infty$-norm is defined as:\n\n$$\\lVert\\mathbf{x}\\rVert_\\infty := \\sup\\limits_i |x_i|.$$\n\nFor $p=0$, the $L^0$-\"norm\"[^-1] is defined as:\n$$\\lVert\\mathbf{x}\\rVert_0 := \\text{card}(\\mathbf{x}) = \\sum\\limits_{i=1}^n \\mathbb{I}(x_i \\neq 0)$$\n\nwhere\n\n$$\\mathbb{I}(x_i \\neq 0) :=\n\\begin{cases}\n1 \\qquad \\text{if　} x_i \\neq 0\\\\\\\\\n0 \\qquad\\text{otherwise.}\n\\end{cases}$$\n\nThe $L^2$-norm is also called the Euclidean norm.\n\n## Unit Balls\nThe set of all vectors with $L^p$-norm less than or equal to $1$,\n$$\\mathcal{B}_p = \\lbrace\\mathbf{x} \\in \\mathbb{R}^n:\\lVert\\mathbf{x}\\rVert_p \\leq 1 \\rbrace$$\nis called the unit $L^p$-norm ball.\nThe following figure shows the shapes of the $\\mathcal{B}_p$ balls in $\\mathbb{R}^2$ for $p\\in \\{1/2, 1, 1.1, 4/3, 2, \\infty\\}$.\n\n![various-unit-balls](/notes/images/various-unit-balls.png)\n\n[^-1]: This is a slight abuse in the term as $L^0$-\"norm\" does not satisfy the second property(absolute homogeneity). This is justified as $$\\text{card}(\\mathbf{x}) = \\lim\\limits_{p \\to 0}\\left( \\sum\\limits_{i=1}^n |x_i|^p\\right)^{1/p}.$$","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Norm"},"/notes/Operating-systems":{"content":"## Kernels and Processes\n- [Process](/notes/Process)\n- [Dual-mode operation](/notes/Dual-mode%20operation)\n- [Mode transfer](/notes/Mode%20transfer)\n\t- [Implementation of mode transfer](/notes/Implementation%20of%20mode%20transfer)\n\t- [x86 Mode transfer](/notes/x86%20Mode%20Transfer)\n- [Secure system call](/notes/Secure%20system%20call)\n- [System upcalls](/notes/System%20upcalls)\n\n## Concurrency and Threads\n- [Thread](/notes/Thread)\n\t- [Comparison between processes and threads](/notes/Comparison%20between%20processes%20and%20threads)\n\t- [Thread data structures](/notes/Thread%20data%20structures)\n\t- [Thread life cycle](/notes/Thread%20life%20cycle)\n\t- [Thread models](/notes/Thread%20models)\n\n## Synchronisation\n- [Atomic operation](/notes/Atomic%20operation)\n- [Critical section](notes/Critical%20section.md)\n- [Race condition](/notes/Race%20condition)\n\t- [Too much milk problem](/notes/Too%20much%20milk%20problem)\n\t- [Bounded buffer problem](notes/Bounded%20buffer%20problem.md)\n- [Lock](/notes/Lock)\n- [Condition variable](/notes/Condition%20variable)\n- [Semaphore](/notes/Semaphore)\n- [Deadlock](/notes/Deadlock)\n\n## Scheduling\n- [Separation of mechanism and policy](notes/Separation%20of%20mechanism%20and%20policy.md)\n-","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Operating systems"},"/notes/Parsers":{"content":"","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Parsers"},"/notes/Performance":{"content":"## Defining Performance\n- **Response time (execution time)**: The time between start and completion of a task\n- **Throughput (Bandwidth)**: The number of tasks completed per unit time\n\n## Measuring Performance\n- **Clock cycle** (s): The time for one clock period (usually the processor clock) - constant\n- **Clock rate** (Hz): The inverse of clock period\n- **CPU execution time**: The time CPU spends computing for a certain task (does not include time spent waiting for I/O or running other programs)\n$$\n\\begin{align*}\n\\text{CPU time} \u0026= \\text{CPU clock cycles} \\times \\text{Clock cycle time}\\\\\n\u0026= \\frac{\\text{CPU clock cycles}}{\\text{Clock rate}}\n\\end{align*}\n$$\n- **CPI (Clock cycles per instruction)**: The average number of clock cycles per instruction for a program or program fragment.\n$$\n\\begin{align*}\n\\text{CPU clock cycles} = \\text{Total number of instructions} \\times \\text{CPI}\n\\end{align*}\n$$\nTherefore, we have the following.\n$$\n\\begin{align*}\n\\text{CPU time} \u0026= \\frac{\\text{Instruction count} \\times \\text{CPI}}{\\text{Clock rate}}\n\\end{align*}\n$$","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Performance"},"/notes/Process":{"content":"A **process** is an instance of a program; it is the execution of a program with restricted rights. Processes provide the illusion of an infinite number of _machines_. Each program can have zero, one, or more processes executing it. For each instance of a program, there is a process with its own copy of the program in memory.\n\nThe operating system keeps track of the processes on the computer using a data structure called the **process control block** (PCB).\n\n\n## Comparison with [threads](/notes/Thread)\n- [Comparison between processes and threads](/notes/Comparison%20between%20processes%20and%20threads)","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Process"},"/notes/Programming-language-theory":{"content":"**Programming language theory** (**PLT**) is a branch of [computer science](Computer%20science) that deals with the design, implementation, analysis, characterisation, and classification of formal languages known as programming languages and of their individual features.\n\n## Syntax and Semantics\n- [Syntax](notes/Syntax)\n\t- [Concrete syntax](notes/Concrete%20syntax)\n\t- [Abstract syntax](notes/Abstract%20syntax)\n\t- [Parser](notes/Parser)\n- [Semantic](notes/Semantic.md)\n- Identifier\n\t- Interpreter\n\n## Functions\n- First-order function\n- First-class function\n- Recursion\n\n## Mutability\n- Box\n- Mutable variable","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Programming language theory"},"/notes/Properties-of-determinant":{"content":"","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Properties of determinant"},"/notes/Race-condition":{"content":"---\n\n## Definition\nA **race condition** is a situation where multiple process access and manipulate _the same data_ concurrently, and the outcome of the execution depends on _the particular order_ (interleaving) of such accesses.\n\n## Example\nSuppose that initially `y = 12`, and a program with two threads that do the following is run.\n\n| Thread A    | Thread B    |\n|","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Race condition"},"/notes/Secure-system-call":{"content":"## Importance\nThe kernel must implement its system calls in a way that protects itself from all errors and attacks that might be launched by the misuse of the interface. That is, the kernel should always assume that the parameters passed to a system call are intentionally designed to be as _malicious_ as possible.\n\n## Implementation of a Secure System Call\n\n![secure-syscall](/notes/images/secure-syscall.png)\n\n1. The user program calls the user stub in the normal way, oblivious to the fact the implementation of the procedure is in fact in the kernel.\n2. The user stub fills in the code for the system call and executes the trap instruction.\n3. The hardware transfers control to the kernel, vectoring to the system call handler. The handler acts as a stub on the kernel side, **copying** and checking arguments and then calling the kernel implementation of system call.\n4. After the system call completes, it returns to the handler.\n5. The handler returns to user level at the next instruction in the stub.\n6. The stub returns to the caller.\n\n## Tasks of the Kernel Stub\n#### Locate system call arguments\nUnlike a regular kernel procedure, the arguments to a system call are stored in user memory. Since the user stack pointer may be corrupted, the stub must check the address to verify whether the pointer argument is a legal address within the user domain. If it is legal, the stub converts the virtual address into a physical address.\n\n#### Validate parameters\nThe kernel must protect itself against malicious or accidental errors in the format or content of its arguments. If an error is detected, the kernel returns to the user program.\n\n#### Copy before check\nAn application might modify the parameter _after_ the stub checks its value but _before_ the parameter is used in the actual implementation of the routine. This is called a **time of check vs. time of use (TOCTOU) attack**. To prevent this, kernel copies the system call parameters into kernel memory before performing the necessary checks.\n\n#### Copy back any results\nFor the user program to access the results of the system call, the stub must copy the result from the kernel into user memory. The kernel must translate the physical address into virtual address before performing the copy.","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Secure system call"},"/notes/Semantic":{"content":"","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Semantic"},"/notes/Semaphore":{"content":"","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Semaphore"},"/notes/Separation-of-mechanism-and-policy":{"content":"## Definition\nThe separation of **mechanism** and **policy** is a design principle in computer science. According to the separation of mechanism and policy principle, mechanism should work no matter what policy is used.\n\n- **Mechanism** is a part of a system implementation that control the authorisation of operations and the allocation of resources.\n- **Policy** determines _which_ decisions are made about which operations to authorise, and which resources to allocate.\n\nFor example, when considering a [thread context switch], **mechanism** decides _how to switch between threads_, and **policy** determines _which thread to run next_.","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Separation of mechanism and policy"},"/notes/Set-theory":{"content":"","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Set theory"},"/notes/Subspace":{"content":"## Definition\n\u003e Let $V$ be a [vector space](notes/Vector%20space.md) over the [field](notes/Field.md) $F$. A **subspace** of $V$ is a subset $W \\subset V$ which itself is a vector space over $F$ with the same operations defined on $V$.\n\n## Theorems\n### Theorem 1 [^1]\n\u003e A non-empty subset $W$ of $V$ is a subspace of $V$ _if and only if_ $\\forall \\mathbf{x}, \\mathbf{y} \\in W, \\forall c \\in F:$ $c\\mathbf{x} + \\mathbf{y} \\in W$.\n\n#### Proof\n$(\\Rightarrow)$ Trivial.\n\n$(\\Leftarrow)$ Since $W \\neq \\emptyset$, $\\forall \\mathbf{v} \\in W:$ $(-1)\\mathbf{v} + \\mathbf{v} = \\mathbf{0} \\in W$.\n\n$\\forall \\mathbf{w} \\in W, \\forall c \\in F:$ $c\\mathbf{w} = c\\mathbf{w} + \\mathbf{0} \\in W$. In particular, $(-1)\\mathbf{w} = -\\mathbf{w} \\in W$.\n\nFinally, $\\forall \\mathbf{v}, \\mathbf{w} \\in W:$ $\\mathbf{v} + \\mathbf{w} = 1\\mathbf{v} + \\mathbf{w} \\in W$.\n\nTherefore, $W$ is a subspace of $V$.\n$$\\tag*{$||$}$$\n### Theorem 2[^1]\n\u003e The intersection of any collection of subspaces of a vector space $V$ is a subspace of $V$.\n\n#### Proof\nLet $\\lbrace W\\_a \\rbrace$ be the collection of subspaces of $V$, and let $W = \\cap\\_{a}W\\_a$. Since $\\mathbf{0} \\in W\\_a$ for all $W\\_a$, $\\mathbf{0} \\in W$ and thus $W$ is nonempty.\n\nLet $\\mathbf{x}, \\mathbf{y} \\in W$ and $c$ be an arbitrary scalar. By definition of $W$, $\\mathbf{x},\\mathbf{y} \\in W\\_a$ for all $W\\_a$ and since they are all subspaces of $V$, $c\\mathbf{x} + \\mathbf{y} \\in W\\_a$ for all $W\\_a$. Thus $c\\mathbf{x} + \\mathbf{y} \\in W$. \n$$\\tag*{$||$}$$ \n\n[^1]: Linear Algebra, Second Edition, by Kenneth Hoffman and Ray Kunze","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Subspace"},"/notes/Syntax":{"content":"**Syntax** of a programming language decides the apprearance of the language.\nIt allows us to know which strings are programs and what the structures of the programs are.\nIt consists of []","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Syntax"},"/notes/System-upcalls":{"content":"## Necessity of System Upcalls\nTo allow applications to implement operating system-like functionality, more than [system call](/notes/Mode%20transfer#System%20Calls) is required; applications can also benefit from being told when events occur that _need their immediate attention_. Such _virtualised_ interrupts and exceptions are called **upcalls**, also known as **signals** (in UNIX).\n\n## Uses of System Upcalls\n#### Preemptive user-level threads\nAn application may run multiple tasks, or threads, in a process.\n\n#### Asynchronous I/O notification (`async` / `await`)\nIn an asynchronous I/O, a system calls starts the request and returns immediately. Later, the application can poll the kernel for I/O completion, or a separate notification can be sent via an upcall to the application when the I/O completes.\n\n#### Interprocess communication\nA kernel upcall is needed if a process generates an event that needs the instant attention of another process.\n\n#### User-level exception handling\nApplications may have their own exception handling routines. For this, the operating system needs to inform the application when it receives a processor exception.\n\n#### User-level resource allocation\nMany applications are able to optimise their behaviour to differing amounts of CPU time or memory.\n- e.g., Java garbage collection\n\n## Diagrams\n- The state of the user program and signal handler before a UNIX signal\n![upcall-before](/notes/images/upcall-before.png)\n\n- The state of the user program and signal handler during a UNIX signal\n![upcall-during](/notes/images/upcall-during.png)\n\n## Comparison with [Interrupts](/notes/Mode%20transfer#Interrupts)\n#### Types of Signals\n- In place of hardware-defined interrupts and processor exceptions, the kernel defines a limited number of sifnal types that a process can receive.\n\n#### Handlers\n- The kernel defines its own [interrupt vector](/notes/Implementation%20of%20mode%20transfer#Interrupt%20Vector).\n- Each process defines its own signal handlers for each signal type.\n\n#### Signal Stack\n- The kernel uses [interrupt stack](/notes/Implementation%20of%20mode%20transfer#Interrupt%20Stack), a region of _kernel_ memory when handling interrupts.\n- Applications have the option to run UNIX signal handlers on the process's _normal execution stack_, or on a special **signal stack** allocated buy the user process in user memory.\n\n#### Signal Masking\n- The kernel can defer the arrival of interrupts via [interrupt masking](/notes/Implementation%20of%20mode%20transfer#Interrupt%20Masking).\n- UNIX defers signals for events that occur while the signal handler for those types of events is in progress.\n- The deferred signal is delivered once the handler returns to the kernel.\n\n#### Processor State\n- The _kernel_ copies onto the signal stack the saved state of the program counter, stack pointer, and general-purpose registers at the point when the program stopped.\n- When the signal handler returns, the kernel reloads the saved state into the processor to resume program execution.\n- The signal handler can also _modify_ the saved state, so that the kernel resumes a different user-level task on return.","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"System upcalls"},"/notes/Thread":{"content":"A **thread** is a _single execution sequence_ that represents _a separately schedulable task_. Doing so, threads provide the illusion of an infinite number of _processors_.\n\n- **Single execution sequence**: Each thread executes a sequence of instructions, just as in the familiar sequential programming model.\n- **Separately schedulable task**: The operating system can run, suspend (block), or resume a thread at any time.\n\nThreads can run either in a [process](/notes/Process) or in the kernel; there is also _shared state_ that is not saved or restored when switching the processor between threads.\n\n## Advantages\nUsing threads to express and manage concurrency has several advantages.\n\n-  **Expressing logically concurrent tasks**: Threads eneable the expression of an application's natural concurrency by writing each concurrent task as a separate thread.\n- **Shifting work to run in the background**: To improve user responsiveness and performance, a common design pattern is to create threads to perform work that in the background, without the user waiting for the result.\n- **Exploiting multiple processors**: Programs can use threads on a multiprocessor to do work in parallel; they can do the same work in less time or more work in the same elapsed time.\n- **Managing I/O devices**: By running tasks as separate threads, when one task is waiting for I/O, the processor can make progress on a different task.\n\n## Comparison with [Processes](/notes/Process)\n- [Comparison between processes and threads](/notes/Comparison%20between%20processes%20and%20threads)\n\n## Thread Data Structures\n- [Thread data structures](/notes/Thread%20data%20structures)\n\n## Thread Life Cycle\n- [Thread life cycle](/notes/Thread%20life%20cycle)","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Thread"},"/notes/Thread-data-structures":{"content":"![thread-data-structure](/notes/images/thread-data-structure.png)\n\n## Per-Thread State and Thread Control Block (TCB)\nThe operating system needs a data structure to represent a threads's state. This data structure is called the **thread control block (TCB)**. For every thread the operating system creates, it creates one TCB.\n\nThe thread control block holds two types of per-thread information:\n- **Per-thread Computation State**\n- **Per-thread Metadata**\n\n#### Per-thread Computation State\nTo create multiple threads and to be able to start/stop each thread as needed, the operating system must allocate space in the TCB for the _current state of each thread's computation_. This, in turn, is the **pointer to the thread's stack** and a **copy of its processor registers**.\n\n- **Stack**\n\t- A thread's stack is the same as the stack for a single-threaded computation. It stores information needed by the nested procedures the thread is currently running.\n\t- Each thread needs its own stack, because at any given time different threads can be in different states in their sequential computations.\n\t- When a new thread is created, the operating system allocates it a new stack and stores a pointer to that stack in the thread's TCB.\n\n- **Copy of processor registers**\n\t- A processor's registers include not only its general-purpose registers (for storing intermediate values for ongoing computations), but they also include special-purpose registers, such as the _instruction pointer_ and the _stack pointer_.\n\t- To be able to suspend/run/resume threads, the operating system needs a place to store a thread's registers when that thread is not actively running.\n\n#### Per-thread Metadata\nThe TCB also includes **per-thread metadata**, information for managing the thread. This includes _thread ID (tid)_, _scheduling priority_, and _status_.\n\n## Shared State\nSome state is **shared** between threads running _in the same process_ or _within the operating system kernel_. The followings are examples of shared states between threads.\n\n- Program **code** is shared by all threads in a process (although each thread may be executing at a different place within that code).\n- Statically allocated **global variables** and dynamically allocated **heap variables** can store information accessible to all threads.","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Thread data structures"},"/notes/Thread-life-cycle":{"content":"---\n\n![thread-life-cycle](/notes/images/thread-life-cycle.png)\n\n## Init\n- Thread creation `thread_create()` puts a thread into its `init` state and allocates and initialises per-thread data structures.\n- Once that is done, thread creation code puts the thread in `ready` state by adding the thread to the _ready list_ (set of runnable threads that are waiting their turn to use a processor).\n\n## Ready\n- A thread in `ready` state is available to be run but is not currently running.\n- Its TCB is on the ready list, and the values of its registers are stored in its TCB.\n- At any time, the **scheduler** can cause a thread to transition from `ready` to `running` state, by copying its register values from its TCB to a processor's registers.\n\n## Running\n- A thread in `running` state is running on a processor. At this time, its register values are stored on the processor rather than in the TCB.\n- A `running` thread can transition to the `ready` state in two ways:\n\t- The **scheduler** can _preempt_ a `running` thread and move it to the `ready` state by saving the thread's registers to its TCB and switching the processor to run the next thread on the ready list.\n\t- A `running` thread can voluntarily relinquish the processor and go from `running` to `ready` by calling `thread_yield()`.\n\n## Waiting\n- A thread in the `waiting` state is waiting for some event.\n- While the scheduler can move a thread in the `ready` state to the `running` state, a thread in the `waiting` state cannot run until some action by another thread moves it from `waiting` to `ready`.\n- The TCB of a `waiting` thread is stored on the _waiting list_ of some synchronisation variable associated with the event. When the required event occurs, the operating system moves the TCB from the synchronisation variable's waiting list to the scheduler's ready list, transitioning the thread from `waiting` to `ready`.\n\n## Finished\n- A thread in `finished` state never runs again.\n- The system can free some or all of its state for other use. Some systems may store `finished` threads in a _finished list_.\n\n\nOne way to understand the states is to consider where a thread's TCB and registers are stored.\n\n| State of Thread | Location of TCB                            | Location of Registers |\n|","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Thread life cycle"},"/notes/Thread-models":{"content":"---\n\nSupport for threads may be provided either at the user level, for **user threads**, or by the kernel, for **kernel threads**. **User threads** are supported above the kernel and are managed without kernel support, whereas **kernel threads** are supported and managed directly by the operating system. Accordingly, a _relationship_ must exist between user threads and kernel threads.\n\n## One-to-one Model\n![one-to-one-model](/notes/images/one-to-one-model.png)\nThe **one-to-one model** maps each user thread to a kernel thread.\n|             |                                                                                                                                      |\n|","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Thread models"},"/notes/Too-much-milk-problem":{"content":"---\n\n## Definition\nThe **Too Much Milk** problem models two roommates who share a refrigerator and, who make sure the refrigerator is _always_ well stocked with milk.\n\n## Example Situation\n| Time | Roommate 1                   | Roommate 2                   |\n|","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Too much milk problem"},"/notes/Topology":{"content":"","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Topology"},"/notes/Vector-space":{"content":"## Definition\n\nA vector space $V$ over a [field](notes/Field.md) $F$ consists of a set on which two operations $+$ (_addition_) and $\\cdot$ (_scalar multiplication_) are defined so that the followings hold.\n\nFor any $\\mathbf{x}, \\mathbf{y}, \\mathbf{z} \\in V$ and $c, d \\in F$:\n\u003e **(A1)** $\\mathbf{x}, \\mathbf{y} \\in V \\Rightarrow \\mathbf{x} + \\mathbf{y} \\in V$\n\u003e\n\u003e **(A2)** $\\mathbf{x} + \\mathbf{y} = \\mathbf{y} + \\mathbf{x}$ 　(Commutativity of addition)\n\u003e\n\u003e **(A3)** $(\\mathbf{x} + \\mathbf{y}) + \\mathbf{z} = \\mathbf{x} + (\\mathbf{y} + \\mathbf{z})$ 　(Associativity of addition)\n\u003e\n\u003e **(A4)** $\\exists ! \\mathbf{0} \\in V$ such that $\\forall \\mathbf{x} \\in V: \\mathbf{x} + \\mathbf{0} = \\mathbf{x}$ 　(Existence of additive identity)\n\u003e\n\u003e **(A5)** $\\forall \\mathbf{x} \\in V: \\exists ! (-\\mathbf{x}) \\in V$ such that $\\mathbf{x} + (-\\mathbf{x}) = \\mathbf{0}$ 　(Existence of additive inverse)\n\u003e\n\u003e **(M1)** $\\mathbf{x} \\in V \\Rightarrow c\\mathbf{x} \\in V$\n\u003e\n\u003e **(M2)** $c(d\\mathbf{x}) = (cd)\\mathbf{x}$\n\u003e\n\u003e **(M3)** $c(\\mathbf{x} + \\mathbf{y}) = c\\mathbf{x} + c\\mathbf{y}$\n\u003e\n\u003e **(M4)** $(c + d)\\mathbf{x} = c\\mathbf{x} + d\\mathbf{x}$\n\u003e\n\u003e **(M5)** $\\forall \\mathbf{x} \\in V: 1\\mathbf{x} = \\mathbf{x}$\n\n## Examples\n### The space of $m \\times n$ matrices\nLet $F$ be any field and $m, n \\in \\mathbb{N}$. Define $F^{m\\times n}$ as the set of all $m\\times n$ matrices over the field $F$. Then, for any matrices $A, B \\in F^{m \\times n}$ and scalar $c \\in F$,\n- $(A + B)\\_{ij} = A\\_{ij} + B\\_{ij}$\n- $(cA)\\_{ij} = cA\\_{ij}$\n\n### The space of functions from a set to a field\nLet $F$ be any field, and $S$ be any nonempty set. Define $V$ as the set of all functions $S \\to F$. Then, for any functions $f, g \\in V$ and scalar $c \\in F$, $\\forall s \\in S$:\n- $(f + g)(s) = f(s) + g(s)$\n- $(cf)(s) = cf(s)$\n- The zero vector is the function $\\mathbf{0}: S \\to \\{0\\}$.\n- The inverse vector $(-f)$ of an arbitrary function $f \\in V$ is given as $(-f)(s) = -f(s)$.\n\n### The space of polynomial functions over a field\nLet $F$ be any field. Define $V$ as tje set of all polynomials $F \\to F$, that is, all functions $f: F \\to F$ in the form of\n$$f(x) = \\sum\\limits_{i=0}^n c_ix^i$$\nwhere $c_i \\in F$ $(i= 0, \\cdots, n)$ are independent of $x$.\n\n\n## Related Concepts\n- [Norm](notes/Norm.md): Defines a distance-like property in vector spaces\n- [Inner product](notes/Inner%20product.md): Allows the concept of 'direction' to be considered in vector spaces","lastmodified":"2022-04-14T16:58:22.246091329Z","title":"Vector space"},"/notes/x86-Mode-Transfer":{"content":"## Background on x86 Architecture\nx86 is segmented, so pointers come in two parts.\n\n- **Segment**: A region of memory such as code, data, or stack\n- **Offset**: An offset within that segment\n\nThe current user-level instruction is a combination of the code segment (`cs`) and the instruction pointer (`eip` / `rip`) within the code segment. The current stack position is a combination of the stack segment (`ss`) and the stack pointer (`esp` / `rsp`) within the stack segment.\n\nThe current privilege level is stored as the low-order buts of the `cs` register. The `eflags` register has condition codes that are modified as a by-product of executing instructions, as well as other flags that control the processor's behaviour (such as whether interrupts are masked).\n\n## Mode Transfer in x86\nWhen a processor exception or a system call trap occurs, the following procedure takes place.\n\n1. **Mask interrupts**.\n\t- The hardware prevents any interrupts from occurring while the processor is in the middle of context switch.\n2. **Save three key values**. \n\t- The hardware saves the values of the stack pointer (`esp`/`rsp` and `ss`), the execution flags (`eflags`), and the instruction pointers (`eip`/`rip` and `cs`) to internal, temporary hardware registers.\n3. **Switch onto the kernel interrupt stack**.\n\t- The hardware switches the stack segment / stack pointer to the base of the kernel interrupt stack as specified in a special hardware register.\n4. **Push the three key values onto the new stack**.\n\t- The hardware stores the internally saved values onto the stack.\n5. **Optionally save an error code.**\n\t- The hardware pushes an error code (generated by certain types of exceptions, e.g., page fault) and make it the top item on the stack. For other types of events, the software interrupt handler pushes a dummy value onto the stack.\n6. **Invoke the interrupt handler**.\n\t- The hardware changes the code segment / program counter to the address of the interrupt handler procedure.\n\t- The handler pushes the rest of the registers, including the current stack pointer (but not the instruction pointer or `eflags` register), onto the stack.\n\n- State of the system before an interrupt handler is invoked\n![x86-mode-switch-1](/notes/images/x86-mode-switch-1.png)\n\n- State of the system after the jump to the interrupt handler\n![x86-mode-switch-2](/notes/images/x86-mode-switch-2.png)\n\n- State of the system after the interrupt handler has started executing\n![x86-mode-switch-3](/notes/images/x86-mode-switch-3.png)\n\nWhen the handler completes, it can resume the interrupted process. The handler executes the x86 `iret` instruction. It [atomically](/notes/Atomic%20operation) restores the program counter, program stack pointer, the processor status word/condition codes, and switches the process back to user mode.","lastmodified":"2022-04-14T16:58:22.270091408Z","title":"x86 Mode Transfer"},"/private/private-note":{"content":"This page doesn't get published!","lastmodified":"2022-04-14T16:58:22.270091408Z","title":"Private Stuff"},"/templates/post":{"content":"","lastmodified":"2022-04-14T16:58:22.270091408Z","title":"{{title}}"}}
    const index = {"backlinks":{"/Computer-science":[{"source":"/notes/Programming-language-theory","target":"/Computer-science","text":"computer science"}],"/index/Books":[{"source":"/","target":"/index/Books","text":"Books"}],"/index/Business-administration":[{"source":"/","target":"/index/Business-administration","text":"Business administration"}],"/index/Computer-science":[{"source":"/","target":"/index/Computer-science","text":"Computer science"}],"/index/Economics":[{"source":"/","target":"/index/Economics","text":"Economics"}],"/index/Mathematics":[{"source":"/","target":"/index/Mathematics","text":"Mathematics"}],"/index/Movies":[{"source":"/","target":"/index/Movies","text":"Movies"}],"/notes/Abstract-syntax":[{"source":"/notes/Programming-language-theory","target":"/notes/Abstract-syntax","text":"Abstract syntax"}],"/notes/Alternating-multilinear-form":[{"source":"/notes/Linear-algebra","target":"/notes/Alternating-multilinear-form","text":"Alternating multilinear form"}],"/notes/Artificial-intelligence":[{"source":"/index/Computer-science","target":"/notes/Artificial-intelligence","text":"Artificial intelligence"}],"/notes/Atomic-operation":[{"source":"/notes/Condition-variable","target":"/notes/Atomic-operation","text":"atomically"},{"source":"/notes/Condition-variable","target":"/notes/Atomic-operation","text":"Atomic"},{"source":"/notes/Implementation-of-mode-transfer","target":"/notes/Atomic-operation","text":"atomic"},{"source":"/notes/Lock","target":"/notes/Atomic-operation","text":"atomic operation"},{"source":"/notes/Operating-systems","target":"/notes/Atomic-operation","text":"Atomic operation"},{"source":"/notes/x86-Mode-Transfer","target":"/notes/Atomic-operation","text":"atomically"}],"/notes/Basis":[{"source":"/notes/Linear-algebra","target":"/notes/Basis","text":"Basis"}],"/notes/Bounded-buffer-problem":[{"source":"/notes/Operating-systems","target":"/notes/Bounded-buffer-problem","text":"Bounded buffer problem"}],"/notes/Comparison-between-processes-and-threads":[{"source":"/notes/Operating-systems","target":"/notes/Comparison-between-processes-and-threads","text":"Comparison between processes and threads"},{"source":"/notes/Process","target":"/notes/Comparison-between-processes-and-threads","text":"Comparison between processes and threads"},{"source":"/notes/Thread","target":"/notes/Comparison-between-processes-and-threads","text":"Comparison between processes and threads"}],"/notes/Computer-architecture":[{"source":"/index/Computer-science","target":"/notes/Computer-architecture","text":"Computer architecture"}],"/notes/Concrete-syntax":[{"source":"/notes/Programming-language-theory","target":"/notes/Concrete-syntax","text":"Concrete syntax"}],"/notes/Condition-variable":[{"source":"/notes/Bounded-buffer-problem","target":"/notes/Condition-variable","text":"another primitive"},{"source":"/notes/Operating-systems","target":"/notes/Condition-variable","text":"Condition variable"}],"/notes/Coordinates":[{"source":"/notes/Linear-algebra","target":"/notes/Coordinates","text":"Coordinates"}],"/notes/Cramers-rule":[{"source":"/notes/Linear-algebra","target":"/notes/Cramers-rule","text":"Cramer's rule"}],"/notes/Critical-section":[{"source":"/notes/Operating-systems","target":"/notes/Critical-section","text":"Critical section"}],"/notes/Deadlock":[{"source":"/notes/Operating-systems","target":"/notes/Deadlock","text":"Deadlock"}],"/notes/Determinant":[{"source":"/notes/Linear-algebra","target":"/notes/Determinant","text":"Determinant"}],"/notes/Dimension":[{"source":"/notes/Linear-algebra","target":"/notes/Dimension","text":"Dimension"}],"/notes/Dual-mode-operation":[{"source":"/notes/Operating-systems","target":"/notes/Dual-mode-operation","text":"Dual-mode operation"}],"/notes/Field":[{"source":"/notes/Inner-product","target":"/notes/Field","text":"field"},{"source":"/notes/Linear-algebra","target":"/notes/Field","text":"Field"},{"source":"/notes/Subspace","target":"/notes/Field","text":"field"},{"source":"/notes/Vector-space","target":"/notes/Field","text":"field"}],"/notes/Fundamental-theorem-of-linear-algebra":[{"source":"/notes/Linear-algebra","target":"/notes/Fundamental-theorem-of-linear-algebra","text":"Fundamental theorem of linear algebra"}],"/notes/H%C3%B6lders-inequality":[{"source":"/notes/Cauchy-Schwartz-inequality","target":"/notes/H%C3%B6lders-inequality","text":"Hölder's inequality"}],"/notes/Implementation-of-mode-transfer":[{"source":"/notes/Operating-systems","target":"/notes/Implementation-of-mode-transfer","text":"Implementation of mode transfer"},{"source":"/notes/System-upcalls","target":"/notes/Implementation-of-mode-transfer","text":"interrupt vector"},{"source":"/notes/System-upcalls","target":"/notes/Implementation-of-mode-transfer","text":"interrupt stack"},{"source":"/notes/System-upcalls","target":"/notes/Implementation-of-mode-transfer","text":"interrupt masking"}],"/notes/Inner-product":[{"source":"/notes/Linear-algebra","target":"/notes/Inner-product","text":"Inner product"},{"source":"/notes/Vector-space","target":"/notes/Inner-product","text":"Inner product"}],"/notes/Isomorphism":[{"source":"/notes/Linear-algebra","target":"/notes/Isomorphism","text":"Isomorphism"}],"/notes/Linear-algebra":[{"source":"/index/Mathematics","target":"/notes/Linear-algebra","text":"Linear algebra"}],"/notes/Linear-transformation":[{"source":"/notes/Linear-algebra","target":"/notes/Linear-transformation","text":"Linear transformation"}],"/notes/Lock":[{"source":"/notes/Bounded-buffer-problem","target":"/notes/Lock","text":"lock"},{"source":"/notes/Condition-variable","target":"/notes/Lock","text":"lock"},{"source":"/notes/Operating-systems","target":"/notes/Lock","text":"Lock"},{"source":"/notes/Too-much-milk-problem","target":"/notes/Lock","text":"Locks"}],"/notes/MIPS-Assembly-language":[{"source":"/notes/Computer-architecture","target":"/notes/MIPS-Assembly-language","text":"MIPS Assembly language"}],"/notes/Mathematical-logic":[{"source":"/index/Computer-science","target":"/notes/Mathematical-logic","text":"Mathematical logic"}],"/notes/Mode-transfer":[{"source":"/notes/Implementation-of-mode-transfer","target":"/notes/Mode-transfer","text":"mode transfer"},{"source":"/notes/Operating-systems","target":"/notes/Mode-transfer","text":"Mode transfer"},{"source":"/notes/System-upcalls","target":"/notes/Mode-transfer","text":"system call"},{"source":"/notes/System-upcalls","target":"/notes/Mode-transfer","text":"Interrupts"}],"/notes/Multilinear-form":[{"source":"/notes/Linear-algebra","target":"/notes/Multilinear-form","text":"Multilinear form"}],"/notes/Norm":[{"source":"/notes/Inner-product","target":"/notes/Norm","text":"norm"},{"source":"/notes/Vector-space","target":"/notes/Norm","text":"Norm"}],"/notes/Operating-systems":[{"source":"/index/Computer-science","target":"/notes/Operating-systems","text":"Operating systems"}],"/notes/Parser":[{"source":"/notes/Programming-language-theory","target":"/notes/Parser","text":"Parser"}],"/notes/Performance":[{"source":"/notes/Computer-architecture","target":"/notes/Performance","text":"Performance"}],"/notes/Process":[{"source":"/notes/Comparison-between-processes-and-threads","target":"/notes/Process","text":"Processes"},{"source":"/notes/Operating-systems","target":"/notes/Process","text":"Process"},{"source":"/notes/Thread","target":"/notes/Process","text":"process"},{"source":"/notes/Thread","target":"/notes/Process","text":"Processes"}],"/notes/Programming-language-theory":[{"source":"/index/Computer-science","target":"/notes/Programming-language-theory","text":"Programming language theory"}],"/notes/Properties-of-determinant":[{"source":"/notes/Linear-algebra","target":"/notes/Properties-of-determinant","text":"Properties of determinant"}],"/notes/Race-condition":[{"source":"/notes/Operating-systems","target":"/notes/Race-condition","text":"Race condition"}],"/notes/Secure-system-call":[{"source":"/notes/Operating-systems","target":"/notes/Secure-system-call","text":"Secure system call"}],"/notes/Semantic":[{"source":"/notes/Programming-language-theory","target":"/notes/Semantic","text":"Semantic"}],"/notes/Semaphore":[{"source":"/notes/Operating-systems","target":"/notes/Semaphore","text":"Semaphore"}],"/notes/Separation-of-mechanism-and-policy":[{"source":"/notes/Operating-systems","target":"/notes/Separation-of-mechanism-and-policy","text":"Separation of mechanism and policy"}],"/notes/Set-theory":[{"source":"/index/Computer-science","target":"/notes/Set-theory","text":"Set theory"}],"/notes/Subspace":[{"source":"/notes/Linear-algebra","target":"/notes/Subspace","text":"Subspace"}],"/notes/Syntax":[{"source":"/notes/Programming-language-theory","target":"/notes/Syntax","text":"Syntax"}],"/notes/System-upcalls":[{"source":"/notes/Operating-systems","target":"/notes/System-upcalls","text":"System upcalls"}],"/notes/Thread":[{"source":"/notes/Comparison-between-processes-and-threads","target":"/notes/Thread","text":"Threads"},{"source":"/notes/Condition-variable","target":"/notes/Thread","text":"thread"},{"source":"/notes/Operating-systems","target":"/notes/Thread","text":"Thread"},{"source":"/notes/Process","target":"/notes/Thread","text":"threads"}],"/notes/Thread-data-structures":[{"source":"/notes/Operating-systems","target":"/notes/Thread-data-structures","text":"Thread data structures"},{"source":"/notes/Thread","target":"/notes/Thread-data-structures","text":"Thread data structures"}],"/notes/Thread-life-cycle":[{"source":"/notes/Operating-systems","target":"/notes/Thread-life-cycle","text":"Thread life cycle"},{"source":"/notes/Thread","target":"/notes/Thread-life-cycle","text":"Thread life cycle"}],"/notes/Thread-models":[{"source":"/notes/Operating-systems","target":"/notes/Thread-models","text":"Thread models"}],"/notes/Too-much-milk-problem":[{"source":"/notes/Lock","target":"/notes/Too-much-milk-problem","text":"safety"},{"source":"/notes/Lock","target":"/notes/Too-much-milk-problem","text":"liveliness"},{"source":"/notes/Operating-systems","target":"/notes/Too-much-milk-problem","text":"Too much milk problem"}],"/notes/Topology":[{"source":"/index/Mathematics","target":"/notes/Topology","text":"Topology"}],"/notes/Vector-space":[{"source":"/notes/Inner-product","target":"/notes/Vector-space","text":"vector space"},{"source":"/notes/Linear-algebra","target":"/notes/Vector-space","text":"Vector space"},{"source":"/notes/Subspace","target":"/notes/Vector-space","text":"vector space"}],"/notes/x86-Mode-Transfer":[{"source":"/notes/Operating-systems","target":"/notes/x86-Mode-Transfer","text":"x86 Mode transfer"}],"/scheduler":[{"source":"/notes/Condition-variable","target":"/scheduler","text":"scheduler"}]},"links":{"/":[{"source":"/","target":"/index/Mathematics","text":"Mathematics"},{"source":"/","target":"/index/Computer-science","text":"Computer science"},{"source":"/","target":"/index/Business-administration","text":"Business administration"},{"source":"/","target":"/index/Economics","text":"Economics"},{"source":"/","target":"/index/Books","text":"Books"},{"source":"/","target":"/index/Movies","text":"Movies"}],"/index/Computer-science":[{"source":"/index/Computer-science","target":"/notes/Mathematical-logic","text":"Mathematical logic"},{"source":"/index/Computer-science","target":"/notes/Set-theory","text":"Set theory"},{"source":"/index/Computer-science","target":"/notes/Programming-language-theory","text":"Programming language theory"},{"source":"/index/Computer-science","target":"/notes/Computer-architecture","text":"Computer architecture"},{"source":"/index/Computer-science","target":"/notes/Operating-systems","text":"Operating systems"},{"source":"/index/Computer-science","target":"/notes/Artificial-intelligence","text":"Artificial intelligence"}],"/index/Mathematics":[{"source":"/index/Mathematics","target":"/notes/Linear-algebra","text":"Linear algebra"},{"source":"/index/Mathematics","target":"/notes/Topology","text":"Topology"}],"/notes/Bounded-buffer-problem":[{"source":"/notes/Bounded-buffer-problem","target":"/notes/Lock","text":"lock"},{"source":"/notes/Bounded-buffer-problem","target":"/notes/Condition-variable","text":"another primitive"}],"/notes/Cauchy-Schwartz-inequality":[{"source":"/notes/Cauchy-Schwartz-inequality","target":"/notes/H%C3%B6lders-inequality","text":"Hölder's inequality"}],"/notes/Comparison-between-processes-and-threads":[{"source":"/notes/Comparison-between-processes-and-threads","target":"/notes/Process","text":"Processes"},{"source":"/notes/Comparison-between-processes-and-threads","target":"/notes/Thread","text":"Threads"}],"/notes/Computer-architecture":[{"source":"/notes/Computer-architecture","target":"/notes/Performance","text":"Performance"},{"source":"/notes/Computer-architecture","target":"/notes/MIPS-Assembly-language","text":"MIPS Assembly language"}],"/notes/Condition-variable":[{"source":"/notes/Condition-variable","target":"/notes/Thread","text":"thread"},{"source":"/notes/Condition-variable","target":"/notes/Lock","text":"lock"},{"source":"/notes/Condition-variable","target":"/notes/Atomic-operation","text":"atomically"},{"source":"/notes/Condition-variable","target":"/notes/Atomic-operation","text":"Atomic"},{"source":"/notes/Condition-variable","target":"/scheduler","text":"scheduler"}],"/notes/Implementation-of-mode-transfer":[{"source":"/notes/Implementation-of-mode-transfer","target":"/notes/Mode-transfer","text":"mode transfer"},{"source":"/notes/Implementation-of-mode-transfer","target":"/notes/Atomic-operation","text":"atomic"}],"/notes/Inner-product":[{"source":"/notes/Inner-product","target":"/notes/Vector-space","text":"vector space"},{"source":"/notes/Inner-product","target":"/notes/Field","text":"field"},{"source":"/notes/Inner-product","target":"/notes/Norm","text":"norm"}],"/notes/Linear-algebra":[{"source":"/notes/Linear-algebra","target":"/notes/Field","text":"Field"},{"source":"/notes/Linear-algebra","target":"/notes/Vector-space","text":"Vector space"},{"source":"/notes/Linear-algebra","target":"/notes/Subspace","text":"Subspace"},{"source":"/notes/Linear-algebra","target":"/notes/Basis","text":"Basis"},{"source":"/notes/Linear-algebra","target":"/notes/Dimension","text":"Dimension"},{"source":"/notes/Linear-algebra","target":"/notes/Coordinates","text":"Coordinates"},{"source":"/notes/Linear-algebra","target":"/notes/Linear-transformation","text":"Linear transformation"},{"source":"/notes/Linear-algebra","target":"/notes/Isomorphism","text":"Isomorphism"},{"source":"/notes/Linear-algebra","target":"/notes/Fundamental-theorem-of-linear-algebra","text":"Fundamental theorem of linear algebra"},{"source":"/notes/Linear-algebra","target":"/notes/Multilinear-form","text":"Multilinear form"},{"source":"/notes/Linear-algebra","target":"/notes/Alternating-multilinear-form","text":"Alternating multilinear form"},{"source":"/notes/Linear-algebra","target":"/notes/Determinant","text":"Determinant"},{"source":"/notes/Linear-algebra","target":"/notes/Properties-of-determinant","text":"Properties of determinant"},{"source":"/notes/Linear-algebra","target":"/notes/Cramers-rule","text":"Cramer's rule"},{"source":"/notes/Linear-algebra","target":"/notes/Inner-product","text":"Inner product"}],"/notes/Lock":[{"source":"/notes/Lock","target":"/notes/Atomic-operation","text":"atomic operation"},{"source":"/notes/Lock","target":"/notes/Too-much-milk-problem","text":"safety"},{"source":"/notes/Lock","target":"/notes/Too-much-milk-problem","text":"liveliness"}],"/notes/Operating-systems":[{"source":"/notes/Operating-systems","target":"/notes/Process","text":"Process"},{"source":"/notes/Operating-systems","target":"/notes/Dual-mode-operation","text":"Dual-mode operation"},{"source":"/notes/Operating-systems","target":"/notes/Mode-transfer","text":"Mode transfer"},{"source":"/notes/Operating-systems","target":"/notes/Implementation-of-mode-transfer","text":"Implementation of mode transfer"},{"source":"/notes/Operating-systems","target":"/notes/x86-Mode-Transfer","text":"x86 Mode transfer"},{"source":"/notes/Operating-systems","target":"/notes/Secure-system-call","text":"Secure system call"},{"source":"/notes/Operating-systems","target":"/notes/System-upcalls","text":"System upcalls"},{"source":"/notes/Operating-systems","target":"/notes/Thread","text":"Thread"},{"source":"/notes/Operating-systems","target":"/notes/Comparison-between-processes-and-threads","text":"Comparison between processes and threads"},{"source":"/notes/Operating-systems","target":"/notes/Thread-data-structures","text":"Thread data structures"},{"source":"/notes/Operating-systems","target":"/notes/Thread-life-cycle","text":"Thread life cycle"},{"source":"/notes/Operating-systems","target":"/notes/Thread-models","text":"Thread models"},{"source":"/notes/Operating-systems","target":"/notes/Atomic-operation","text":"Atomic operation"},{"source":"/notes/Operating-systems","target":"/notes/Critical-section","text":"Critical section"},{"source":"/notes/Operating-systems","target":"/notes/Race-condition","text":"Race condition"},{"source":"/notes/Operating-systems","target":"/notes/Too-much-milk-problem","text":"Too much milk problem"},{"source":"/notes/Operating-systems","target":"/notes/Bounded-buffer-problem","text":"Bounded buffer problem"},{"source":"/notes/Operating-systems","target":"/notes/Lock","text":"Lock"},{"source":"/notes/Operating-systems","target":"/notes/Condition-variable","text":"Condition variable"},{"source":"/notes/Operating-systems","target":"/notes/Semaphore","text":"Semaphore"},{"source":"/notes/Operating-systems","target":"/notes/Deadlock","text":"Deadlock"},{"source":"/notes/Operating-systems","target":"/notes/Separation-of-mechanism-and-policy","text":"Separation of mechanism and policy"}],"/notes/Process":[{"source":"/notes/Process","target":"/notes/Thread","text":"threads"},{"source":"/notes/Process","target":"/notes/Comparison-between-processes-and-threads","text":"Comparison between processes and threads"}],"/notes/Programming-language-theory":[{"source":"/notes/Programming-language-theory","target":"/Computer-science","text":"computer science"},{"source":"/notes/Programming-language-theory","target":"/notes/Syntax","text":"Syntax"},{"source":"/notes/Programming-language-theory","target":"/notes/Concrete-syntax","text":"Concrete syntax"},{"source":"/notes/Programming-language-theory","target":"/notes/Abstract-syntax","text":"Abstract syntax"},{"source":"/notes/Programming-language-theory","target":"/notes/Parser","text":"Parser"},{"source":"/notes/Programming-language-theory","target":"/notes/Semantic","text":"Semantic"}],"/notes/Subspace":[{"source":"/notes/Subspace","target":"/notes/Vector-space","text":"vector space"},{"source":"/notes/Subspace","target":"/notes/Field","text":"field"}],"/notes/System-upcalls":[{"source":"/notes/System-upcalls","target":"/notes/Mode-transfer","text":"system call"},{"source":"/notes/System-upcalls","target":"/notes/Mode-transfer","text":"Interrupts"},{"source":"/notes/System-upcalls","target":"/notes/Implementation-of-mode-transfer","text":"interrupt vector"},{"source":"/notes/System-upcalls","target":"/notes/Implementation-of-mode-transfer","text":"interrupt stack"},{"source":"/notes/System-upcalls","target":"/notes/Implementation-of-mode-transfer","text":"interrupt masking"}],"/notes/Thread":[{"source":"/notes/Thread","target":"/notes/Process","text":"process"},{"source":"/notes/Thread","target":"/notes/Process","text":"Processes"},{"source":"/notes/Thread","target":"/notes/Comparison-between-processes-and-threads","text":"Comparison between processes and threads"},{"source":"/notes/Thread","target":"/notes/Thread-data-structures","text":"Thread data structures"},{"source":"/notes/Thread","target":"/notes/Thread-life-cycle","text":"Thread life cycle"}],"/notes/Too-much-milk-problem":[{"source":"/notes/Too-much-milk-problem","target":"/notes/Lock","text":"Locks"}],"/notes/Vector-space":[{"source":"/notes/Vector-space","target":"/notes/Field","text":"field"},{"source":"/notes/Vector-space","target":"/notes/Norm","text":"Norm"},{"source":"/notes/Vector-space","target":"/notes/Inner-product","text":"Inner product"}],"/notes/x86-Mode-Transfer":[{"source":"/notes/x86-Mode-Transfer","target":"/notes/Atomic-operation","text":"atomically"}]}}
    const links = [{"source":"/","target":"/index/Mathematics","text":"Mathematics"},{"source":"/","target":"/index/Computer-science","text":"Computer science"},{"source":"/","target":"/index/Business-administration","text":"Business administration"},{"source":"/","target":"/index/Economics","text":"Economics"},{"source":"/","target":"/index/Books","text":"Books"},{"source":"/","target":"/index/Movies","text":"Movies"},{"source":"/index/Computer-science","target":"/notes/Mathematical-logic","text":"Mathematical logic"},{"source":"/index/Computer-science","target":"/notes/Set-theory","text":"Set theory"},{"source":"/index/Computer-science","target":"/notes/Programming-language-theory","text":"Programming language theory"},{"source":"/index/Computer-science","target":"/notes/Computer-architecture","text":"Computer architecture"},{"source":"/index/Computer-science","target":"/notes/Operating-systems","text":"Operating systems"},{"source":"/index/Computer-science","target":"/notes/Artificial-intelligence","text":"Artificial intelligence"},{"source":"/index/Mathematics","target":"/notes/Linear-algebra","text":"Linear algebra"},{"source":"/index/Mathematics","target":"/notes/Topology","text":"Topology"},{"source":"/notes/Bounded-buffer-problem","target":"/notes/Lock","text":"lock"},{"source":"/notes/Bounded-buffer-problem","target":"/notes/Condition-variable","text":"another primitive"},{"source":"/notes/Cauchy-Schwartz-inequality","target":"/notes/H%C3%B6lders-inequality","text":"Hölder's inequality"},{"source":"/notes/Comparison-between-processes-and-threads","target":"/notes/Process","text":"Processes"},{"source":"/notes/Comparison-between-processes-and-threads","target":"/notes/Thread","text":"Threads"},{"source":"/notes/Computer-architecture","target":"/notes/Performance","text":"Performance"},{"source":"/notes/Computer-architecture","target":"/notes/MIPS-Assembly-language","text":"MIPS Assembly language"},{"source":"/notes/Condition-variable","target":"/notes/Thread","text":"thread"},{"source":"/notes/Condition-variable","target":"/notes/Lock","text":"lock"},{"source":"/notes/Condition-variable","target":"/notes/Atomic-operation","text":"atomically"},{"source":"/notes/Condition-variable","target":"/notes/Atomic-operation","text":"Atomic"},{"source":"/notes/Condition-variable","target":"/scheduler","text":"scheduler"},{"source":"/notes/Implementation-of-mode-transfer","target":"/notes/Mode-transfer","text":"mode transfer"},{"source":"/notes/Implementation-of-mode-transfer","target":"/notes/Atomic-operation","text":"atomic"},{"source":"/notes/Inner-product","target":"/notes/Vector-space","text":"vector space"},{"source":"/notes/Inner-product","target":"/notes/Field","text":"field"},{"source":"/notes/Inner-product","target":"/notes/Norm","text":"norm"},{"source":"/notes/Linear-algebra","target":"/notes/Field","text":"Field"},{"source":"/notes/Linear-algebra","target":"/notes/Vector-space","text":"Vector space"},{"source":"/notes/Linear-algebra","target":"/notes/Subspace","text":"Subspace"},{"source":"/notes/Linear-algebra","target":"/notes/Basis","text":"Basis"},{"source":"/notes/Linear-algebra","target":"/notes/Dimension","text":"Dimension"},{"source":"/notes/Linear-algebra","target":"/notes/Coordinates","text":"Coordinates"},{"source":"/notes/Linear-algebra","target":"/notes/Linear-transformation","text":"Linear transformation"},{"source":"/notes/Linear-algebra","target":"/notes/Isomorphism","text":"Isomorphism"},{"source":"/notes/Linear-algebra","target":"/notes/Fundamental-theorem-of-linear-algebra","text":"Fundamental theorem of linear algebra"},{"source":"/notes/Linear-algebra","target":"/notes/Multilinear-form","text":"Multilinear form"},{"source":"/notes/Linear-algebra","target":"/notes/Alternating-multilinear-form","text":"Alternating multilinear form"},{"source":"/notes/Linear-algebra","target":"/notes/Determinant","text":"Determinant"},{"source":"/notes/Linear-algebra","target":"/notes/Properties-of-determinant","text":"Properties of determinant"},{"source":"/notes/Linear-algebra","target":"/notes/Cramers-rule","text":"Cramer's rule"},{"source":"/notes/Linear-algebra","target":"/notes/Inner-product","text":"Inner product"},{"source":"/notes/Lock","target":"/notes/Atomic-operation","text":"atomic operation"},{"source":"/notes/Lock","target":"/notes/Too-much-milk-problem","text":"safety"},{"source":"/notes/Lock","target":"/notes/Too-much-milk-problem","text":"liveliness"},{"source":"/notes/Operating-systems","target":"/notes/Process","text":"Process"},{"source":"/notes/Operating-systems","target":"/notes/Dual-mode-operation","text":"Dual-mode operation"},{"source":"/notes/Operating-systems","target":"/notes/Mode-transfer","text":"Mode transfer"},{"source":"/notes/Operating-systems","target":"/notes/Implementation-of-mode-transfer","text":"Implementation of mode transfer"},{"source":"/notes/Operating-systems","target":"/notes/x86-Mode-Transfer","text":"x86 Mode transfer"},{"source":"/notes/Operating-systems","target":"/notes/Secure-system-call","text":"Secure system call"},{"source":"/notes/Operating-systems","target":"/notes/System-upcalls","text":"System upcalls"},{"source":"/notes/Operating-systems","target":"/notes/Thread","text":"Thread"},{"source":"/notes/Operating-systems","target":"/notes/Comparison-between-processes-and-threads","text":"Comparison between processes and threads"},{"source":"/notes/Operating-systems","target":"/notes/Thread-data-structures","text":"Thread data structures"},{"source":"/notes/Operating-systems","target":"/notes/Thread-life-cycle","text":"Thread life cycle"},{"source":"/notes/Operating-systems","target":"/notes/Thread-models","text":"Thread models"},{"source":"/notes/Operating-systems","target":"/notes/Atomic-operation","text":"Atomic operation"},{"source":"/notes/Operating-systems","target":"/notes/Critical-section","text":"Critical section"},{"source":"/notes/Operating-systems","target":"/notes/Race-condition","text":"Race condition"},{"source":"/notes/Operating-systems","target":"/notes/Too-much-milk-problem","text":"Too much milk problem"},{"source":"/notes/Operating-systems","target":"/notes/Bounded-buffer-problem","text":"Bounded buffer problem"},{"source":"/notes/Operating-systems","target":"/notes/Lock","text":"Lock"},{"source":"/notes/Operating-systems","target":"/notes/Condition-variable","text":"Condition variable"},{"source":"/notes/Operating-systems","target":"/notes/Semaphore","text":"Semaphore"},{"source":"/notes/Operating-systems","target":"/notes/Deadlock","text":"Deadlock"},{"source":"/notes/Operating-systems","target":"/notes/Separation-of-mechanism-and-policy","text":"Separation of mechanism and policy"},{"source":"/notes/Process","target":"/notes/Thread","text":"threads"},{"source":"/notes/Process","target":"/notes/Comparison-between-processes-and-threads","text":"Comparison between processes and threads"},{"source":"/notes/Programming-language-theory","target":"/Computer-science","text":"computer science"},{"source":"/notes/Programming-language-theory","target":"/notes/Syntax","text":"Syntax"},{"source":"/notes/Programming-language-theory","target":"/notes/Concrete-syntax","text":"Concrete syntax"},{"source":"/notes/Programming-language-theory","target":"/notes/Abstract-syntax","text":"Abstract syntax"},{"source":"/notes/Programming-language-theory","target":"/notes/Parser","text":"Parser"},{"source":"/notes/Programming-language-theory","target":"/notes/Semantic","text":"Semantic"},{"source":"/notes/Subspace","target":"/notes/Vector-space","text":"vector space"},{"source":"/notes/Subspace","target":"/notes/Field","text":"field"},{"source":"/notes/System-upcalls","target":"/notes/Mode-transfer","text":"system call"},{"source":"/notes/System-upcalls","target":"/notes/Mode-transfer","text":"Interrupts"},{"source":"/notes/System-upcalls","target":"/notes/Implementation-of-mode-transfer","text":"interrupt vector"},{"source":"/notes/System-upcalls","target":"/notes/Implementation-of-mode-transfer","text":"interrupt stack"},{"source":"/notes/System-upcalls","target":"/notes/Implementation-of-mode-transfer","text":"interrupt masking"},{"source":"/notes/Thread","target":"/notes/Process","text":"process"},{"source":"/notes/Thread","target":"/notes/Process","text":"Processes"},{"source":"/notes/Thread","target":"/notes/Comparison-between-processes-and-threads","text":"Comparison between processes and threads"},{"source":"/notes/Thread","target":"/notes/Thread-data-structures","text":"Thread data structures"},{"source":"/notes/Thread","target":"/notes/Thread-life-cycle","text":"Thread life cycle"},{"source":"/notes/Too-much-milk-problem","target":"/notes/Lock","text":"Locks"},{"source":"/notes/Vector-space","target":"/notes/Field","text":"field"},{"source":"/notes/Vector-space","target":"/notes/Norm","text":"Norm"},{"source":"/notes/Vector-space","target":"/notes/Inner-product","text":"Inner product"},{"source":"/notes/x86-Mode-Transfer","target":"/notes/Atomic-operation","text":"atomically"}]
    </script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<script>
  MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']],
      displayMath: [['$$','$$'], ['\\[', '\\]']],
      processEscapes: true,
      processEnvironments: true
    },
    options: {
      skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre']
    }
  };

  window.addEventListener('load', (event) => {
      document.querySelectorAll("mjx-container").forEach(function(x){
        x.parentElement.classList += 'has-jax'})
    });

</script>
</head>

<script async src="https://www.googletagmanager.com/gtag/js?id=G-K0BSVL4NZ3"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-K0BSVL4NZ3', { 'anonymize_ip': false });
}
</script>


<script>
  function htmlToElement(html) {
    const template = document.createElement('template')
    html = html.trim()
    template.innerHTML = html
    return template.content.firstChild
  }

  const pathRegex = /\.\.?(\/\.\.)*/
  document.addEventListener("DOMContentLoaded", () => {
    [...document.getElementsByClassName("internal-link")]
      .forEach(li => {
        console.log(li.dataset.src.replace(pathRegex, ''))
        const linkDest = content[li.dataset.src.replace(pathRegex, '')]
        if (linkDest) {
          const popoverElement = `<div class="popover">
    <h3>${linkDest.title}</h3>
    <p>${removeMarkdown(linkDest.content).split(" ", 15).join(" ")}...</p>
</div>`
          const el = htmlToElement(popoverElement)
          li.appendChild(el)
          li.addEventListener("mouseover", () => {
            el.classList.add("visible")
          })
          li.addEventListener("mouseout", () => {
            el.classList.remove("visible")
          })
        }
      })
  })
</script>



<body>
<div id="search-container">
    <div id="search-space">
        <input autocomplete="off" id="search-bar" name="search" type="text" aria-label="Search" placeholder="Search for something...">
        <div id="results-container">
        </div>
    </div>
</div>
<script src="https://cdn.jsdelivr.net/gh/nextapps-de/flexsearch@0.7.2/dist/flexsearch.bundle.js"></script>
<script>
    
    const removeMarkdown = (
        markdown,
        options = {
            listUnicodeChar: false,
            stripListLeaders: true,
            gfm: true,
            useImgAltText: false,
            preserveLinks: false,
        }
    ) => {
        let output = markdown || "";
        output = output.replace(/^(-\s*?|\*\s*?|_\s*?){3,}\s*$/gm, "");

        try {
            if (options.stripListLeaders) {
                if (options.listUnicodeChar)
                    output = output.replace(
                        /^([\s\t]*)([\*\-\+]|\d+\.)\s+/gm,
                        options.listUnicodeChar + " $1"
                    );
                else output = output.replace(/^([\s\t]*)([\*\-\+]|\d+\.)\s+/gm, "$1");
            }
            if (options.gfm) {
                output = output
                    .replace(/\n={2,}/g, "\n")
                    .replace(/~{3}.*\n/g, "")
                    .replace(/~~/g, "")
                    .replace(/`{3}.*\n/g, "");
            }
            if (options.preserveLinks) {
                output = output.replace(/\[(.*?)\][\[\(](.*?)[\]\)]/g, "$1 ($2)")
            }
            output = output
                .replace(/<[^>]*>/g, "")
                .replace(/^[=\-]{2,}\s*$/g, "")
                .replace(/\[\^.+?\](\: .*?$)?/g, "")
                .replace(/\s{0,2}\[.*?\]: .*?$/g, "")
                .replace(/\!\[(.*?)\][\[\(].*?[\]\)]/g, options.useImgAltText ? "$1" : "")
                .replace(/\[(.*?)\][\[\(].*?[\]\)]/g, "$1")
                .replace(/^\s{0,3}>\s?/g, "")
                .replace(/(^|\n)\s{0,3}>\s?/g, "\n\n")
                .replace(/^\s{1,2}\[(.*?)\]: (\S+)( ".*?")?\s*$/g, "")
                .replace(
                    /^(\n)?\s{0,}#{1,6}\s+| {0,}(\n)?\s{0,}#{0,} {0,}(\n)?\s{0,}$/gm,
                    "$1$2$3"
                )
                .replace(/([\*_]{1,3})(\S.*?\S{0,1})\1/g, "$2")
                .replace(/([\*_]{1,3})(\S.*?\S{0,1})\1/g, "$2")
                .replace(/(`{3,})(.*?)\1/gm, "$2")
                .replace(/`(.+?)`/g, "$1")
                .replace(/\n{2,}/g, "\n\n");
        } catch (e) {
            console.error(e);
            return markdown;
        }
        return output;
    };
</script>
<script>
    const contentIndex = new FlexSearch.Document({
        cache: true,
        charset: "latin:extra",
        optimize: true,
        worker: true,
        document: {
            index: [{
                field: "content",
                tokenize: "strict",
                context: {
                    resolution: 5,
                    depth: 3,
                    bidirectional: true
                },
                suggest: true,
            }, {
                field: "title",
                tokenize: "forward",
            }]
        }
    })

    for (const [key, value] of Object.entries(content)) {
        contentIndex.add({
            id: key,
            title: value.title,
            content: removeMarkdown(value.content),
        })
    }

    const highlight = (content, term) => {
        const highlightWindow = 20
        const tokenizedTerm = term.split(/\s+/).filter(t => t !== "")
        const splitText = content.split(/\s+/).filter(t => t !== "")
        const includesCheck = (token) => tokenizedTerm.some(term => token.toLowerCase().startsWith(term.toLowerCase()))

        const occurrencesIndices = splitText
            .map(includesCheck)

        
        let bestSum = 0
        let bestIndex = 0
        for (let i = 0; i < Math.max(occurrencesIndices.length - highlightWindow, 0); i++) {
            const window = occurrencesIndices.slice(i, i + highlightWindow)
            const windowSum = window.reduce((total, cur) => total + cur, 0)
            if (windowSum >= bestSum) {
                bestSum = windowSum
                bestIndex = i
            }
        }

        const startIndex = Math.max(bestIndex - highlightWindow, 0)
        const endIndex = Math.min(startIndex + 2 * highlightWindow, splitText.length)
        const mappedText = splitText
            .slice(startIndex, endIndex)
            .map(token => {
                if (includesCheck(token)) {
                    return `<span class="search-highlight">${token}</span>`
                }
                return token
            })
            .join(" ")
            .replaceAll('</span> <span class="search-highlight">', " ")
        return `${startIndex === 0 ? "" : "..."}${mappedText}${endIndex === splitText.length ? "" : "..."}`
    }

    const resultToHTML = ({url, title, content, term}) => {
        const text = removeMarkdown(content)
        const resultTitle = highlight(title, term)
        const resultText = highlight(text, term)
        return `<button class="result-card" id="${url}">
        <h3>${resultTitle}</h3>
        <p>${resultText}</p>
    </button>`
    }

    const redir = (id, term) => {
        window.location.href = "https:\/\/azure-wings.github.io\/wiki" + `${id}#:~:text=${encodeURIComponent(term)}`
    }

    const fetch = id => ({
        id,
        url: id,
        title: content[id].title,
        content: content[id].content
    })

    const source = document.getElementById('search-bar')
    const results = document.getElementById("results-container")
    let term
    source.addEventListener("keyup", (e) => {
        if (e.key === "Enter") {
            const anchor = document.getElementsByClassName("result-card")[0]
            redir(anchor.id, term)
        }
    })
    source.addEventListener('input', (e) => {
        term = e.target.value
        contentIndex.search(term, [
            {
                field: "content",
                limit: 10,
                suggest: true,
            },
            {
                field: "title",
                limit: 5,
            }
        ]).then(searchResults => {
            const getByField = field => {
                const results = searchResults.filter(x => x.field === field)
                if (results.length === 0) {
                    return []
                } else {
                    return [...results[0].result]
                }
            }
            const allIds = new Set([...getByField('title'), ...getByField('content')])
            const finalResults = [...allIds].map(fetch)

            // display
            if (finalResults.length === 0) {
                results.innerHTML = `<button class="result-card">
                    <h3>No results.</h3>
                    <p>Try another search term?</p>
                </button>`
            } else {
                results.innerHTML = finalResults
                    .map(result => resultToHTML({
                        ...result,
                        term,
                    }))
                    .join("\n")
                const anchors = document.getElementsByClassName("result-card");
                [...anchors].forEach(anchor => {
                    anchor.onclick = () => redir(anchor.id, term)
                })
            }
        })
    })


    const searchContainer = document.getElementById("search-container")
    function openSearch() {
        if (searchContainer.style.display === "none" || searchContainer.style.display === "") {
            source.value = ""
            results.innerHTML = ""
            searchContainer.style.display = "block"
            source.focus()
        } else {
            searchContainer.style.display = "none"
        }
    }

    function closeSearch() {
        searchContainer.style.display = "none"
    }

    document.addEventListener('keydown', (event) => {
        if (event.key === "/") {
            event.preventDefault()
            openSearch()
        }
        if (event.key === "Escape") {
            event.preventDefault()
            closeSearch()
        }
    })

    window.addEventListener('DOMContentLoaded', () => {
        const searchButton = document.getElementById("search-icon")
        searchButton.addEventListener('click', (evt) => {
            openSearch()
        })
        searchButton.addEventListener('keydown', (evt) => {
            openSearch()
        })
        searchContainer.addEventListener('click', (evt) => {
            closeSearch()
        })
        document.getElementById("search-space").addEventListener('click', (evt) => {
            evt.stopPropagation()
        })
    })

</script>

<div class="singlePage">
    
    <header>
        <h1 id="page-title"><a href="https://azure-wings.github.io/wiki"></a></h1>
      <svg tabindex="0" id="search-icon" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title">Search Icon</title><desc id="desc">Icon to open search</desc><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"/><circle cx="8" cy="8" r="7"/></g></svg>
      <div class="spacer"></div>
      <div class='darkmode'>
    <input class='toggle' id='darkmode-toggle' type='checkbox' tabindex="-1">
    <label id="toggle-label-light" for='darkmode-toggle' tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="dayIcon" x="0px" y="0px" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35;" xml:space="preserve">
            <title>Light Mode</title>
            <path d="M6,17.5C6,16.672,5.328,16,4.5,16h-3C0.672,16,0,16.672,0,17.5    S0.672,19,1.5,19h3C5.328,19,6,18.328,6,17.5z M7.5,26c-0.414,0-0.789,0.168-1.061,0.439l-2,2C4.168,28.711,4,29.086,4,29.5    C4,30.328,4.671,31,5.5,31c0.414,0,0.789-0.168,1.06-0.44l2-2C8.832,28.289,9,27.914,9,27.5C9,26.672,8.329,26,7.5,26z M17.5,6    C18.329,6,19,5.328,19,4.5v-3C19,0.672,18.329,0,17.5,0S16,0.672,16,1.5v3C16,5.328,16.671,6,17.5,6z M27.5,9    c0.414,0,0.789-0.168,1.06-0.439l2-2C30.832,6.289,31,5.914,31,5.5C31,4.672,30.329,4,29.5,4c-0.414,0-0.789,0.168-1.061,0.44    l-2,2C26.168,6.711,26,7.086,26,7.5C26,8.328,26.671,9,27.5,9z M6.439,8.561C6.711,8.832,7.086,9,7.5,9C8.328,9,9,8.328,9,7.5    c0-0.414-0.168-0.789-0.439-1.061l-2-2C6.289,4.168,5.914,4,5.5,4C4.672,4,4,4.672,4,5.5c0,0.414,0.168,0.789,0.439,1.06    L6.439,8.561z M33.5,16h-3c-0.828,0-1.5,0.672-1.5,1.5s0.672,1.5,1.5,1.5h3c0.828,0,1.5-0.672,1.5-1.5S34.328,16,33.5,16z     M28.561,26.439C28.289,26.168,27.914,26,27.5,26c-0.828,0-1.5,0.672-1.5,1.5c0,0.414,0.168,0.789,0.439,1.06l2,2    C28.711,30.832,29.086,31,29.5,31c0.828,0,1.5-0.672,1.5-1.5c0-0.414-0.168-0.789-0.439-1.061L28.561,26.439z M17.5,29    c-0.829,0-1.5,0.672-1.5,1.5v3c0,0.828,0.671,1.5,1.5,1.5s1.5-0.672,1.5-1.5v-3C19,29.672,18.329,29,17.5,29z M17.5,7    C11.71,7,7,11.71,7,17.5S11.71,28,17.5,28S28,23.29,28,17.5S23.29,7,17.5,7z M17.5,25c-4.136,0-7.5-3.364-7.5-7.5    c0-4.136,3.364-7.5,7.5-7.5c4.136,0,7.5,3.364,7.5,7.5C25,21.636,21.636,25,17.5,25z" />
        </svg>
    </label>
    <label id="toggle-label-dark" for='darkmode-toggle' tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="nightIcon" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background='new 0 0 100 100'" xml:space="preserve">
            <title>Dark Mode</title>
            <path d="M96.76,66.458c-0.853-0.852-2.15-1.064-3.23-0.534c-6.063,2.991-12.858,4.571-19.655,4.571  C62.022,70.495,50.88,65.88,42.5,57.5C29.043,44.043,25.658,23.536,34.076,6.47c0.532-1.08,0.318-2.379-0.534-3.23  c-0.851-0.852-2.15-1.064-3.23-0.534c-4.918,2.427-9.375,5.619-13.246,9.491c-9.447,9.447-14.65,22.008-14.65,35.369  c0,13.36,5.203,25.921,14.65,35.368s22.008,14.65,35.368,14.65c13.361,0,25.921-5.203,35.369-14.65  c3.872-3.871,7.064-8.328,9.491-13.246C97.826,68.608,97.611,67.309,96.76,66.458z" />
        </svg>
    </label>
</div>
  </header>
  <article>
      <h1>Determinant</h1>
      <p class="meta">
          Last updated February 3, 2022
      </p>
      <ul class="tags">
          
      </ul>
      
      <aside class="mainTOC">
          <h3>Table of Contents</h3>
          <nav id="TableOfContents"></nav>
      </aside>
      
      

    </article>
    <hr/>
<div class="page-end">
    <div class="backlinks-container">
        <h3>Backlinks</h3>
<ul class="backlinks">
    
    
    
    
    
    
    <li>
            <a href="../../notes/Linear-algebra">Linear algebra</a>
        </li>
</ul>

    </div>
    <div>
        <script src="https://cdn.jsdelivr.net/npm/d3@6"></script>
<h3>Interactive Graph</h3>
<div id="graph-container"></div>
<style>
    :root {
        --g-node: var(--secondary);
        --g-node-active: var(--primary);
        --g-node-inactive: var(--visited);
        --g-link: var(--outlinegray);
        --g-link-active: #5a7282;
    }
</style>
<script>
  const curPage = "https://azure-wings.github.io/wiki/notes/Determinant".replace("https://azure-wings.github.io/wiki", "")
  const pathColors = [{"/moc":"#4388cc"}]
  let depth =  -1 

  const parseIdsFromLinks = (links) => [...(new Set(links.flatMap(link => ([link.source, link.target]))))]

  const neighbours = new Set()
  const wl = [curPage || "/", "__SENTINEL"]
  if (depth >= 0) {
    while (depth >= 0 && wl.length > 0) {
      
      const cur = wl.shift()
      if (cur === "__SENTINEL") {
        depth--
        wl.push("__SENTINEL")
      } else {
        neighbours.add(cur)
        const outgoing = index.links[cur] || []
        const incoming = index.backlinks[cur] || []
        wl.push(...outgoing.map(l => l.target), ...incoming.map(l => l.source))
      }
    }
  } else {
    parseIdsFromLinks(links).forEach(id => neighbours.add(id))
  }

  const data = {
    nodes: [...neighbours].map(id => ({id})),
    links: links.filter(l => neighbours.has(l.source) && neighbours.has(l.target)),
  }

  const color = (d) => {
    if (d.id === curPage || (d.id === "/" && curPage === "")) {
      return "var(--g-node-active)"
    }

    for (const pathColor of pathColors) {
      const path = Object.keys(pathColor)[0]
      const colour = pathColor[path]
      if (d.id.startsWith(path)) {
        return colour
      }
    }

    return "var(--g-node)"
  }

  const drag = simulation => {
    function dragstarted(event, d) {
      if (!event.active) simulation.alphaTarget(1).restart();
      d.fx = d.x;
      d.fy = d.y;
    }

    function dragged(event,d) {
      d.fx = event.x;
      d.fy = event.y;
    }

    function dragended(event,d) {
      if (!event.active) simulation.alphaTarget(0);
      d.fx = null;
      d.fy = null;
    }

    const enableDrag =  true 
    const noop = () => {}
    return d3.drag()
      .on("start", enableDrag ? dragstarted : noop)
      .on("drag", enableDrag ? dragged : noop)
      .on("end", enableDrag ? dragended : noop);
  }

  const height = 250
  const width = document.getElementById("graph-container").offsetWidth

  const simulation = d3.forceSimulation(data.nodes)
    .force("charge", d3.forceManyBody().strength(-30))
    .force("link", d3.forceLink(data.links).id(d => d.id))
    .force("center", d3.forceCenter());

  const svg = d3.select('#graph-container')
    .append('svg')
    .attr('width', width)
    .attr('height', height)
    .attr("viewBox", [-width / 2, -height / 2, width, height]);

  
  const enableLegend =  false 
  if (enableLegend) {
    const legend = [
      {"Current": "var(--g-node-active)"},
      {"Note": "var(--g-node)"},
      ...pathColors
    ]
    legend.forEach((legendEntry, i) => {
      const key = Object.keys(legendEntry)[0]
      const colour = legendEntry[key]
      svg.append("circle").attr("cx", -width/2 + 20).attr("cy", height/2 - 30 * (i+1)).attr("r", 6).style("fill", colour)
      svg.append("text").attr("x", -width/2 + 40).attr("y", height/2 - 30 * (i+1)).text(key).style("font-size", "15px").attr("alignment-baseline","middle")
    })
  }

  
  const link = svg.append("g")
    .selectAll("line")
    .data(data.links)
    .join("line")
    .attr("class", "link")
    .attr("stroke", "var(--g-link)")
    .attr("stroke-width", 2)
    .attr("data-source", d => d.source.id)
    .attr("data-target", d => d.target.id)

  
  const graphNode = svg.append("g")
    .selectAll("g")
    .data(data.nodes)
    .enter().append("g")

  
  const node = graphNode.append("circle")
    .attr("class", "node")
    .attr("id", (d) => d.id)
    .attr("r", (d) => {
      const numOut = index.links[d.id]?.length || 0
      const numIn = index.backlinks[d.id]?.length || 0
      return 3 + (numOut + numIn) / 4
    })
    .attr("fill", color)
    .style("cursor", "pointer")
    .on("click", (_, d) => {
      window.location.href = "https://azure-wings.github.io/wiki" + decodeURI(d.id).replace(/\s+/g, '-')
    })
    .on("mouseover", function (_, d) {
      d3.selectAll(".node")
        .transition()
        .duration(100)
        .attr("fill", "var(--g-node-inactive)")

      const neighbours = parseIdsFromLinks([...(index.links[d.id] || []), ...(index.backlinks[d.id] || [])])
      const neighbourNodes = d3.selectAll(".node").filter(d => neighbours.includes(d.id))
      const currentId = d.id
      const linkNodes = d3.selectAll(".link").filter(d => d.source.id === currentId || d.target.id === currentId)

      
      neighbourNodes
        .transition()
        .duration(200)
        .attr("fill", color)

      
      linkNodes
        .transition()
        .duration(200)
        .attr("stroke", "var(--g-link-active)")

      
      d3.select(this.parentNode)
        .select("text")
        .raise()
        .transition()
        .duration(200)
        .style("opacity", 1)
    }).on("mouseleave", function (_,d) {
      d3.selectAll(".node")
        .transition()
        .duration(200)
        .attr("fill", color)

      const currentId = d.id
      const linkNodes = d3.selectAll(".link").filter(d => d.source.id === currentId || d.target.id === currentId)

      linkNodes
        .transition()
        .duration(200)
        .attr("stroke", "var(--g-link)")

      d3.select(this.parentNode)
        .select("text")
        .transition()
        .duration(200)
        .style("opacity", 0)
    })
    .call(drag(simulation));

  
  const labels = graphNode.append("text")
    .attr("dx", 12)
    .attr("dy", ".35em")
    .text((d) => content[decodeURI(d.id).replace(/\s+/g, '-')]?.title || "Untitled")
    .style("opacity", 0)
    .style("pointer-events", "none")
    .call(drag(simulation));

  
  const enableZoom =  true 
  if (enableZoom) {
    svg.call(d3.zoom()
      .extent([[0, 0], [width, height]])
      .scaleExtent([0.25, 4])
      .on("zoom", ({transform}) => {
        link.attr("transform", transform);
        node.attr("transform", transform);
        labels.attr("transform", transform);
      }));
  }

  
  simulation.on("tick", () => {
    link
      .attr("x1", d => d.source.x)
      .attr("y1", d => d.source.y)
      .attr("x2", d => d.target.x)
      .attr("y2", d => d.target.y);
    node
      .attr("cx", d => d.x)
      .attr("cy", d => d.y);
    labels
      .attr("x", d => d.x)
      .attr("y", d => d.y);
  });
</script>

    </div>
</div>


<div id="contact_buttons">
    <footer>
        <p>Made by azurewings using <a href="https://github.com/jackyzha0/quartz">Quartz</a>, © 2022</p>
        
        <a href="../../">Home</a>
        <a href="https://github.com/azure-wings">Github</a><a href="https://www.linkedin.com/in/leegiyeon">LinkedIn</a><a href="mailto:azurewings.seoul@gmail.com">E-mail</a></footer>
</div>
</div>
</body>

</html>
